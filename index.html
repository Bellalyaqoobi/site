<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ - ÿ™ÿß⁄©ÿ≥€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™€å ⁄©ÿßÿ®ŸÑ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #00c569;
            --primary-dark: #00a858;
            --secondary: #4a4a4a;
            --light: #f8f9fa;
            --dark: #333;
            --gray: #6c757d;
            --border: #e0e0e0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --afghan-red: #d32011;
            --afghan-black: #000000;
            --afghan-green: #00c569;
        }

        body {
            background-color: #f5f5f5;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
            width: 100%;
        }

        /* ÿµŸÅÿ≠Ÿá ÿÆŸàÿ¥ÿ¢ŸÖÿØ⁄ØŸà€å€å */
        .welcome-page {
            background: linear-gradient(135deg, var(--afghan-black) 0%, var(--afghan-red) 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .welcome-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-logo {
            font-size: 48px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .welcome-logo i {
            color: var(--afghan-green);
            font-size: 60px;
        }

        .welcome-title {
            font-size: 42px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .welcome-subtitle {
            font-size: 22px;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .welcome-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: var(--radius);
            backdrop-filter: blur(10px);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 36px;
            margin-bottom: 15px;
            color: var(--afghan-green);
        }

        .feature-title {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .feature-desc {
            font-size: 15px;
            opacity: 0.8;
        }

        .welcome-actions {
            margin-top: 40px;
        }

        .btn-welcome {
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 50px;
            font-weight: bold;
            margin: 0 10px;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .btn-welcome-primary {
            background: var(--afghan-green);
            color: white;
        }

        .btn-welcome-primary:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .btn-welcome-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-welcome-outline:hover {
            background: white;
            color: var(--afghan-black);
            transform: scale(1.05);
        }

        /* ŸáÿØÿ± */
        header {
            background: linear-gradient(135deg, var(--afghan-black) 0%, var(--afghan-red) 100%);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: bold;
            color: white;
        }

        .logo i {
            font-size: 24px;
            color: var(--afghan-green);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: white;
            font-weight: 500;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .nav-links a:hover {
            color: var(--afghan-green);
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--afghan-green);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .user-name {
            font-weight: 500;
            font-size: 14px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--afghan-green);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid white;
            color: white;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* ŸÖŸÜŸà€å ŸáŸÖÿ®ÿ±⁄Øÿ± */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s;
        }

        /* ŸÖŸÜŸà€å ŸÖŸàÿ®ÿß€åŸÑ */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: right 0.3s;
            padding: 20px;
            overflow-y: auto;
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .mobile-menu-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: bold;
            color: var(--dark);
        }

        .close-menu {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }

        .mobile-nav-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .mobile-nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 16px;
        }

        .mobile-nav-links a:hover {
            background: rgba(0, 197, 105, 0.1);
            color: var(--afghan-green);
        }

        .mobile-nav-links a i {
            width: 20px;
            text-align: center;
        }

        .mobile-user-actions {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* ŸÖÿ≠ÿ™Ÿàÿß€å ÿßÿµŸÑ€å */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 25px;
            margin: 25px 0;
            flex: 1;
        }

        .map-container {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            height: 550px;
            position: relative;
        }

        .kabul-map {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            position: relative;
        }

        .location-marker {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--afghan-red);
            border: 2px solid white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .location-marker:hover {
            transform: scale(1.3);
            background: var(--afghan-green);
        }

        .location-marker::after {
            content: attr(data-name);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .location-marker:hover::after {
            opacity: 1;
        }

        /* ŸÜÿ¥ÿßŸÜ⁄Øÿ± ÿÆŸàÿØÿ±Ÿà */
        .car-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--afghan-green);
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 10;
            transition: all 1s ease-in-out;
        }

        .car-marker::after {
            content: "üöó";
            position: absolute;
            top: -10px;
            left: -5px;
            font-size: 16px;
        }

        /* ŸÜÿ¥ÿßŸÜ⁄Øÿ± ŸÖŸàÿ™Ÿàÿ± */
        .bike-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--afghan-green);
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 10;
            transition: all 1s ease-in-out;
        }

        .bike-marker::after {
            content: "üèçÔ∏è";
            position: absolute;
            top: -10px;
            left: -5px;
            font-size: 16px;
        }

        /* ŸÜÿ¥ÿßŸÜ⁄Øÿ± ŸÖÿ≥ÿßŸÅÿ± */
        .passenger-marker {
            position: absolute;
            width: 15px;
            height: 15px;
            background: var(--afghan-red);
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 10;
        }

        .passenger-marker::after {
            content: "üë§";
            position: absolute;
            top: -12px;
            left: -8px;
            font-size: 16px;
        }

        /* ÿÆÿ∑Ÿàÿ∑ ŸÖÿ≥€åÿ± */
        .route-line {
            position: absolute;
            height: 3px;
            background: var(--afghan-green);
            transform-origin: 0 0;
            z-index: 5;
            opacity: 0.7;
        }

        /* ÿÆ€åÿßÿ®ÿßŸÜŸáÿß */
        .street {
            position: absolute;
            background: rgba(0, 0, 0, 0.1);
        }

        .main-street {
            background: rgba(0, 0, 0, 0.15);
        }

        .ride-panel {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            height: fit-content;
        }

        .panel-title {
            font-size: 18px;
            margin-bottom: 18px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-title i {
            color: var(--afghan-green);
        }

        /* ŸÅÿ±ŸÖ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ™ÿß⁄©ÿ≥€å */
        .ride-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 500;
            color: var(--dark);
            font-size: 13px;
        }

        .input-with-icon {
            position: relative;
        }

        .form-input {
            padding: 12px 15px 12px 40px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 15px;
            transition: border-color 0.3s;
            width: 100%;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--afghan-green);
        }

        .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 16px;
        }

        .location-swap {
            display: flex;
            justify-content: center;
            margin: 5px 0;
        }

        .swap-btn {
            background: var(--light);
            border: none;
            border-radius: 50%;
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--gray);
            transition: all 0.3s;
            font-size: 14px;
        }

        .swap-btn:hover {
            background: var(--afghan-green);
            color: white;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸàÿπ ÿ≥ŸÅÿ± */
        .ride-type-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .ride-type {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ride-type:hover {
            border-color: var(--afghan-green);
        }

        .ride-type.selected {
            border-color: var(--afghan-green);
            background-color: rgba(0, 197, 105, 0.05);
        }

        .ride-type-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ride-icon {
            width: 38px;
            height: 38px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .economy .ride-icon {
            background: #4caf50;
        }

        .comfort .ride-icon {
            background: #2196f3;
        }

        .bike .ride-icon {
            background: #9c27b0;
        }

        .ride-details h3 {
            font-size: 15px;
            margin-bottom: 4px;
        }

        .ride-details p {
            font-size: 12px;
            color: var(--gray);
        }

        .ride-price {
            font-weight: bold;
            color: var(--dark);
            text-align: right;
            font-size: 14px;
        }

        .price-estimate {
            font-size: 11px;
            color: var(--gray);
            margin-top: 3px;
        }

        /* ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖÿ≥ÿßŸÅÿ™ Ÿà ŸÇ€åŸÖÿ™ */
        .trip-calculator {
            background: var(--light);
            padding: 14px;
            border-radius: 10px;
            margin: 15px 0;
            display: none;
        }

        .trip-calculator.active {
            display: block;
        }

        .calculator-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .calculator-row:last-child {
            margin-bottom: 0;
            font-weight: bold;
            border-top: 1px solid var(--border);
            padding-top: 8px;
        }

        /* ÿØ⁄©ŸÖŸá ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ */
        .submit-btn {
            background: var(--afghan-green);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .submit-btn:hover {
            background: var(--primary-dark);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Ÿàÿ∂ÿπ€åÿ™ ÿ¨ÿ≥ÿ™ÿ¨Ÿà */
        .searching-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .searching-animation {
            width: 70px;
            height: 70px;
            border: 4px solid var(--border);
            border-top: 4px solid var(--afghan-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 18px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .searching-text {
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 10px;
            text-align: center;
        }

        .cancel-search {
            background: transparent;
            border: 1px solid var(--gray);
            color: var(--gray);
            padding: 8px 18px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }

        .cancel-search:hover {
            background: var(--gray);
            color: white;
        }

        /* ŸÖÿØÿßŸÑŸáÿß */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 15px;
        }

        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 18px;
        }

        .modal-title {
            font-size: 20px;
            color: var(--afghan-green);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
            color: var(--gray);
        }

        /* ŸÖÿØÿßŸÑ ÿ±ÿßŸÜŸÜÿØŸá */
        .driver-info {
            background: var(--light);
            padding: 18px;
            border-radius: 10px;
            margin: 18px 0;
        }

        .driver-details {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 14px;
        }

        .driver-avatar {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: var(--afghan-green);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            font-weight: bold;
        }

        .driver-name-rating h3 {
            font-size: 17px;
            margin-bottom: 5px;
        }

        .driver-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #ffc107;
            font-size: 14px;
        }

        .car-details {
            display: flex;
            justify-content: space-between;
            padding-top: 14px;
            border-top: 1px solid var(--border);
        }

        .car-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .car-model {
            font-weight: bold;
            font-size: 15px;
        }

        .car-color {
            color: var(--gray);
            font-size: 13px;
        }

        .car-plate {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: monospace;
            font-weight: bold;
            font-size: 14px;
        }

        .trip-info {
            display: flex;
            justify-content: space-between;
            margin: 18px 0;
            padding: 14px;
            background: rgba(0, 197, 105, 0.05);
            border-radius: 10px;
        }

        .trip-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            flex: 1;
        }

        .trip-detail i {
            font-size: 18px;
            color: var(--afghan-green);
        }

        .trip-detail span {
            font-size: 13px;
            color: var(--gray);
            text-align: center;
        }

        .trip-detail .value {
            font-weight: bold;
            color: var(--dark);
            font-size: 15px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
        }

        .modal-actions .btn {
            flex: 1;
            justify-content: center;
            padding: 12px;
        }

        /* ŸÅÿ±ŸÖŸáÿß€å Ÿàÿ±ŸàÿØ Ÿà ÿ´ÿ®ÿ™ŸÜÿßŸÖ */
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .form-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 18px;
        }

        .form-tab {
            padding: 10px 18px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            font-size: 15px;
        }

        .form-tab.active {
            border-bottom: 2px solid var(--afghan-green);
            color: var(--afghan-green);
            font-weight: bold;
        }

        .form-tab-content {
            display: none;
        }

        .form-tab-content.active {
            display: block;
        }

        .password-toggle {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray);
            font-size: 16px;
        }

        .form-footer {
            text-align: center;
            margin-top: 15px;
            font-size: 13px;
            color: var(--gray);
        }

        .form-footer a {
            color: var(--afghan-green);
            text-decoration: none;
            font-weight: 500;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        .error-message {
            color: var(--afghan-red);
            font-size: 13px;
            margin-top: 5px;
            display: none;
        }

        /* Ÿæ€åÿ¥ŸÜŸáÿßÿØÿßÿ™ ŸÖŸÇÿµÿØ */
        .suggestions {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-top: 20px;
            padding: 20px;
        }

        .suggestions-title {
            font-size: 17px;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .suggestion-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .suggestion-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .suggestion-item:hover {
            border-color: var(--afghan-green);
            background: rgba(0, 197, 105, 0.05);
        }

        .suggestion-icon {
            width: 38px;
            height: 38px;
            border-radius: 8px;
            background: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--afghan-green);
            font-size: 16px;
        }

        .suggestion-text {
            font-weight: 500;
            font-size: 14px;
        }

        /* ŸÖŸÜÿßÿ∑ŸÇ ⁄©ÿßÿ®ŸÑ */
        .kabul-districts {
            margin-top: 25px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 18px;
        }

        .districts-title {
            font-size: 17px;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .districts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .district-item {
            padding: 10px;
            background: var(--light);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        .district-item:hover {
            background: var(--afghan-green);
            color: white;
        }

        /* ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 14px 18px;
            background: var(--afghan-green);
            color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            display: none;
            z-index: 1100;
            max-width: 300px;
            font-size: 14px;
        }

        .notification.error {
            background: var(--afghan-red);
        }

        /* ÿµŸÅÿ≠ÿßÿ™ ÿØ€å⁄Øÿ± */
        .page {
            display: none;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 25px;
            margin: 25px 0;
        }

        .page.active {
            display: block;
        }

        .page-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page-title i {
            color: var(--afghan-green);
        }

        /* ÿ¨ÿØŸàŸÑŸáÿß */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            background: var(--light);
            font-weight: 600;
        }

        .data-table tr:hover {
            background: rgba(0, 197, 105, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .btn-approve {
            background: var(--afghan-green);
            color: white;
        }

        .btn-reject {
            background: var(--afghan-red);
            color: white;
        }

        /* ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ */
        .admin-panel {
            display: none;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .admin-tab.active {
            border-bottom: 2px solid var(--afghan-green);
            color: var(--afghan-green);
            font-weight: bold;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            border-left: 4px solid var(--afghan-green);
        }

        .stat-card h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: var(--gray);
        }

        .stat-card .value {
            font-size: 24px;
            font-weight: bold;
            color: var(--afghan-green);
        }

        /* ⁄©ÿßÿ±ÿ™Ÿáÿß€å ÿ™ÿÆŸÅ€åŸÅ */
        .discount-card {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--afghan-green);
        }

        .discount-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .discount-code {
            font-size: 18px;
            font-weight: bold;
            color: var(--afghan-green);
        }

        .discount-percent {
            background: var(--afghan-green);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
        }

        .discount-details {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 14px;
        }

        /* ŸÅŸàÿ™ÿ± */
        footer {
            background: linear-gradient(135deg, var(--afghan-black) 0%, var(--afghan-red) 100%);
            color: white;
            padding: 35px 0 18px;
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 25px;
        }

        .footer-column h3 {
            font-size: 17px;
            margin-bottom: 18px;
            color: var(--afghan-green);
        }

        .footer-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
            font-size: 14px;
        }

        .footer-links a:hover {
            color: var(--afghan-green);
        }

        .social-links {
            display: flex;
            gap: 12px;
            margin-top: 18px;
        }

        .social-links a {
            color: white;
            font-size: 18px;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--afghan-green);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 18px;
            border-top: 1px solid #444;
            color: #aaa;
            font-size: 13px;
        }

        /* ÿ±€åÿ≥ŸæÿßŸÜÿ≥€åŸà */
        @media (max-width: 1200px) {
            .container {
                max-width: 100%;
            }
        }

        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }

            .nav-links {
                display: none;
            }

            .hamburger {
                display: flex;
            }

            .user-actions .btn {
                display: none;
            }

            .map-container {
                height: 400px;
            }

            .suggestion-list {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 12px 0;
            }

            .logo {
                font-size: 18px;
            }

            .logo i {
                font-size: 22px;
            }

            .main-content {
                margin: 20px 0;
            }

            .ride-panel {
                padding: 18px;
            }

            .panel-title {
                font-size: 17px;
            }

            .form-input {
                padding: 11px 15px 11px 40px;
                font-size: 14px;
            }

            .ride-type {
                padding: 12px;
            }

            .ride-icon {
                width: 36px;
                height: 36px;
                font-size: 15px;
            }

            .ride-details h3 {
                font-size: 14px;
            }

            .ride-details p {
                font-size: 11px;
            }

            .ride-price {
                font-size: 13px;
            }

            .submit-btn {
                padding: 14px;
                font-size: 15px;
            }

            .modal-content {
                padding: 20px;
            }

            .modal-title {
                font-size: 18px;
            }

            .driver-details {
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }

            .car-details {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .trip-info {
                flex-direction: column;
                gap: 15px;
            }

            .modal-actions {
                flex-direction: column;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .districts-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .page {
                padding: 20px;
            }

            .page-title {
                font-size: 20px;
            }

            .data-table {
                font-size: 13px;
            }

            .data-table th, .data-table td {
                padding: 10px 12px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .admin-tabs {
                flex-direction: column;
            }

            .admin-tab {
                text-align: center;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 10px;
            }

            .logo {
                font-size: 16px;
            }

            .main-content {
                margin: 15px 0;
                gap: 15px;
            }

            .map-container {
                height: 350px;
            }

            .ride-panel {
                padding: 15px;
            }

            .ride-form {
                gap: 15px;
            }

            .form-group label {
                font-size: 12px;
            }

            .form-input {
                padding: 10px 15px 10px 35px;
                font-size: 13px;
            }

            .input-icon {
                left: 12px;
                font-size: 14px;
            }

            .ride-type-selector {
                gap: 8px;
                margin: 12px 0;
            }

            .ride-type {
                padding: 10px;
            }

            .ride-type-info {
                gap: 10px;
            }

            .ride-icon {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }

            .ride-details h3 {
                font-size: 13px;
            }

            .ride-details p {
                font-size: 10px;
            }

            .ride-price {
                font-size: 12px;
            }

            .price-estimate {
                font-size: 10px;
            }

            .trip-calculator {
                padding: 12px;
            }

            .calculator-row {
                font-size: 13px;
            }

            .submit-btn {
                padding: 12px;
                font-size: 14px;
            }

            .suggestions {
                padding: 15px;
                margin-top: 15px;
            }

            .suggestions-title {
                font-size: 16px;
            }

            .suggestion-list {
                gap: 10px;
            }

            .suggestion-item {
                padding: 10px;
            }

            .suggestion-icon {
                width: 34px;
                height: 34px;
                font-size: 14px;
            }

            .suggestion-text {
                font-size: 13px;
            }

            .kabul-districts {
                padding: 15px;
                margin-top: 20px;
            }

            .districts-title {
                font-size: 16px;
            }

            .districts-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .district-item {
                padding: 8px;
                font-size: 12px;
            }

            .page {
                padding: 15px;
                margin: 15px 0;
            }

            .page-title {
                font-size: 18px;
            }

            .form-tab {
                padding: 8px 15px;
                font-size: 14px;
            }

            .auth-form {
                gap: 15px;
            }

            .notification {
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }

        @media (max-width: 400px) {
            .mobile-menu {
                width: 260px;
            }

            .modal-content {
                padding: 15px;
            }

            .driver-info {
                padding: 15px;
            }

            .driver-avatar {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .driver-name-rating h3 {
                font-size: 16px;
            }

            .car-model {
                font-size: 14px;
            }

            .car-plate {
                font-size: 13px;
            }

            .trip-detail .value {
                font-size: 14px;
            }

            .footer-content {
                gap: 15px;
            }

            .footer-column h3 {
                font-size: 16px;
            }

            .footer-links a {
                font-size: 13px;
            }
        }

        /* ÿßÿ≥ÿ™ÿß€åŸÑŸáÿß€å ÿ¨ÿØ€åÿØ ÿ®ÿ±ÿß€å ŸÇÿßÿ®ŸÑ€åÿ™Ÿáÿß€å ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØŸá */
        .route-path {
            position: absolute;
            background: var(--afghan-green);
            z-index: 5;
            opacity: 0.7;
            pointer-events: none;
        }

        .live-tracking {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 15px;
            z-index: 20;
            max-width: 300px;
        }

        .tracking-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tracking-row {
            display: flex;
            justify-content: space-between;
        }

        .tracking-label {
            color: var(--gray);
            font-size: 14px;
        }

        .tracking-value {
            font-weight: bold;
            font-size: 14px;
        }

        .payment-methods {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .payment-method {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--border);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method.selected {
            border-color: var(--afghan-green);
            background: rgba(0, 197, 105, 0.05);
        }

        .rating-stars {
            display: flex;
            gap: 5px;
            direction: ltr;
            margin: 10px 0;
        }

        .rating-star {
            color: #ddd;
            cursor: pointer;
            font-size: 24px;
            transition: color 0.3s;
        }

        .rating-star.active {
            color: #ffc107;
        }

        .profile-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--afghan-green);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: bold;
        }

        .profile-info h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .profile-info p {
            color: var(--gray);
            font-size: 14px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .profile-stat {
            text-align: center;
            padding: 15px;
            background: var(--light);
            border-radius: 8px;
        }

        .profile-stat .value {
            font-size: 20px;
            font-weight: bold;
            color: var(--afghan-green);
        }

        .profile-stat .label {
            font-size: 12px;
            color: var(--gray);
            margin-top: 5px;
        }

        .chat-container {
            height: 400px;
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
        }

        .message.received {
            align-self: flex-start;
            background: var(--light);
            border-bottom-right-radius: 5px;
        }

        .message.sent {
            align-self: flex-end;
            background: var(--afghan-green);
            color: white;
            border-bottom-left-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid var(--border);
        }

        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 20px;
            outline: none;
        }

        .chat-input button {
            margin-right: 10px;
            background: var(--afghan-green);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .trip-progress {
            margin: 20px 0;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 30px;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border);
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            transition: all 0.3s;
        }

        .step-icon.active {
            background: var(--afghan-green);
            border-color: var(--afghan-green);
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: var(--gray);
            text-align: center;
        }

        .step-label.active {
            color: var(--afghan-green);
            font-weight: bold;
        }

        .promo-banner {
            background: linear-gradient(135deg, var(--afghan-green) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 15px;
            border-radius: var(--radius);
            margin: 20px 0;
            text-align: center;
        }

        .promo-title {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .promo-desc {
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <!-- ÿµŸÅÿ≠Ÿá ÿÆŸàÿ¥ÿ¢ŸÖÿØ⁄ØŸà€å€å -->
    <div class="welcome-page" id="welcome-page">
        <div class="welcome-content">
            <div class="welcome-logo">
                <i class="fas fa-car-side"></i>
                <span>ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ</span>
            </div>
            <h1 class="welcome-title">ÿ≥ÿ±Ÿà€åÿ≥ ÿ™ÿß⁄©ÿ≥€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™€å ÿØÿ± ÿ≥ÿ±ÿßÿ≥ÿ± ⁄©ÿßÿ®ŸÑ</h1>
            <p class="welcome-subtitle">ÿ≥ÿ±€åÿπÿå ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿà ŸÖŸÇÿ±ŸàŸÜ ÿ®Ÿá ÿµÿ±ŸÅŸá</p>
            
            <div class="welcome-features">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="feature-title">ÿ≥ÿ±€åÿπ Ÿà ÿ¢ÿ≥ÿßŸÜ</h3>
                    <p class="feature-desc">ÿØÿ± ⁄©ŸÖÿ™ÿ± ÿßÿ≤ €µ ÿØŸÇ€åŸÇŸá €å⁄© ÿÆŸàÿØÿ±Ÿà ÿØÿ± ŸÜÿ≤ÿØ€å⁄©€å ÿ¥ŸÖÿß ÿÆŸàÿßŸáÿØ ÿ®ŸàÿØ</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="feature-title">ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿà ÿßŸÖŸÜ</h3>
                    <p class="feature-desc">ÿ™ŸÖÿßŸÖ ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ ŸÖÿß ÿ™ÿß€å€åÿØ ÿ¥ÿØŸá Ÿà ÿØÿßÿ±ÿß€å ÿ®€åŸÖŸá Ÿáÿ≥ÿ™ŸÜÿØ</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <h3 class="feature-title">ŸÇ€åŸÖÿ™ ŸÖŸÜÿßÿ≥ÿ®</h3>
                    <p class="feature-desc">ŸÇ€åŸÖÿ™Ÿáÿß€å ÿ¥ŸÅÿßŸÅ Ÿà ÿ±ŸÇÿßÿ®ÿ™€å ÿ®ÿß ÿßŸÖ⁄©ÿßŸÜ Ÿæÿ±ÿØÿßÿÆÿ™ ŸÜŸÇÿØ€å</p>
                </div>
            </div>
            
            <div class="welcome-actions">
                <button class="btn-welcome btn-welcome-primary" id="start-using-btn">
                    ÿ¥ÿ±Ÿàÿπ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿßÿ≥ŸÜŸæ
                </button>
                <button class="btn-welcome btn-welcome-outline" id="learn-more-btn">
                    ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ®€åÿ¥ÿ™ÿ±
                </button>
            </div>
        </div>
    </div>

    <!-- ŸáÿØÿ± -->
    <header style="display: none;" id="main-header">
        <div class="container nav-container">
            <div class="logo">
                <i class="fas fa-car-side"></i>
                <span>ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ</span>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link" data-page="home"><i class="fas fa-home"></i> ÿÆÿßŸÜŸá</a></li>
                <li><a href="#" class="nav-link" data-page="my-trips"><i class="fas fa-history"></i> ÿ≥ŸÅÿ±Ÿáÿß€å ŸÖŸÜ</a></li>
                <li><a href="#" class="nav-link" data-page="discounts"><i class="fas fa-gift"></i> ÿ™ÿÆŸÅ€åŸÅŸáÿß</a></li>
                <li><a href="#" class="nav-link" data-page="support"><i class="fas fa-question-circle"></i> Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å</a></li>
                <li><a href="#" class="nav-link" data-page="profile"><i class="fas fa-user"></i> Ÿæÿ±ŸàŸÅÿß€åŸÑ</a></li>
                <li><a href="#" class="nav-link" data-page="admin" id="adminLink" style="display: none;"><i class="fas fa-cog"></i> ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™</a></li>
            </ul>
            <div class="user-actions">
                <div class="user-profile" id="userProfile" style="display: none;">
                    <div class="user-avatar" id="userAvatar">ÿß</div>
                    <div class="user-name" id="userName">ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å</div>
                </div>
                <button class="btn btn-outline" id="loginBtn"><i class="fas fa-user"></i> Ÿàÿ±ŸàÿØ / ÿ´ÿ®ÿ™ŸÜÿßŸÖ</button>
                <button class="btn btn-outline" id="logoutBtn" style="display: none;"><i class="fas fa-sign-out-alt"></i> ÿÆÿ±Ÿàÿ¨</button>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <!-- ŸÖŸÜŸà€å ŸÖŸàÿ®ÿß€åŸÑ -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <div class="mobile-menu-logo">
                <i class="fas fa-car-side"></i>
                <span>ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ</span>
            </div>
            <button class="close-menu" id="closeMenu">&times;</button>
        </div>
        <ul class="mobile-nav-links">
            <li><a href="#" class="nav-link" data-page="home"><i class="fas fa-home"></i> ÿÆÿßŸÜŸá</a></li>
            <li><a href="#" class="nav-link" data-page="my-trips"><i class="fas fa-history"></i> ÿ≥ŸÅÿ±Ÿáÿß€å ŸÖŸÜ</a></li>
            <li><a href="#" class="nav-link" data-page="discounts"><i class="fas fa-gift"></i> ÿ™ÿÆŸÅ€åŸÅŸáÿß</a></li>
            <li><a href="#" class="nav-link" data-page="support"><i class="fas fa-question-circle"></i> Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å</a></li>
            <li><a href="#" class="nav-link" data-page="profile"><i class="fas fa-user"></i> Ÿæÿ±ŸàŸÅÿß€åŸÑ</a></li>
            <li><a href="#" class="nav-link" data-page="admin" id="mobileAdminLink" style="display: none;"><i class="fas fa-cog"></i> ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™</a></li>
        </ul>
        <div class="mobile-user-actions">
            <button class="btn btn-primary" id="mobileLoginBtn" style="width: 100%;">Ÿàÿ±ŸàÿØ / ÿ´ÿ®ÿ™ŸÜÿßŸÖ</button>
            <button class="btn btn-outline" id="mobileLogoutBtn" style="width: 100%; display: none;">ÿÆÿ±Ÿàÿ¨</button>
        </div>
    </div>
    <div class="overlay" id="overlay"></div>

    <!-- ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å -->
    <div class="container" style="display: none;" id="main-container">
        <div class="page active" id="home-page">
            <div class="main-content">
                <!-- ŸÜŸÇÿ¥Ÿá ⁄©ÿßÿ®ŸÑ -->
                <div class="map-container">
                    <div class="kabul-map" id="kabulMap">
                        <!-- ŸÜŸÇÿßÿ∑ ŸÖŸáŸÖ ⁄©ÿßÿ®ŸÑ ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿØÿß€åŸÜÿßŸÖ€å⁄© ÿßÿ∂ÿßŸÅŸá ÿÆŸàÿßŸáŸÜÿØ ÿ¥ÿØ -->
                    </div>
                    
                    <!-- ŸæŸÜŸÑ ÿ±ÿØ€åÿßÿ®€å ÿ≤ŸÜÿØŸá -->
                    <div class="live-tracking" id="liveTracking" style="display: none;">
                        <div class="tracking-info">
                            <div class="tracking-row">
                                <span class="tracking-label">ÿ±ÿßŸÜŸÜÿØŸá:</span>
                                <span class="tracking-value" id="trackingDriverName">ÿßÿ≠ŸÖÿØ ÿ∏ÿßŸáÿ±</span>
                            </div>
                            <div class="tracking-row">
                                <span class="tracking-label">ÿ≤ŸÖÿßŸÜ ÿ±ÿ≥€åÿØŸÜ:</span>
                                <span class="tracking-value" id="trackingETA">€¥ ÿØŸÇ€åŸÇŸá</span>
                            </div>
                            <div class="tracking-row">
                                <span class="tracking-label">ŸÖÿ≥ÿßŸÅÿ™:</span>
                                <span class="tracking-value" id="trackingDistance">€≤.€∏ ⁄©€åŸÑŸàŸÖÿ™ÿ±</span>
                            </div>
                            <button class="btn btn-outline" id="cancelTracking" style="margin-top: 10px; width: 100%;">ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±</button>
                        </div>
                    </div>
                    
                    <!-- Ÿàÿ∂ÿπ€åÿ™ ÿ¨ÿ≥ÿ™ÿ¨Ÿà -->
                    <div class="searching-overlay" id="searchingOverlay">
                        <div class="searching-animation"></div>
                        <div class="searching-text" id="searchingText">ÿØÿ± ÿ≠ÿßŸÑ €åÿßŸÅÿ™ŸÜ ŸÜÿ≤ÿØ€å⁄©ÿ™ÿ±€åŸÜ ÿ±ÿßŸÜŸÜÿØŸá...</div>
                        <button class="cancel-search" id="cancelSearch">ŸÑÿ∫Ÿà ÿØÿ±ÿÆŸàÿßÿ≥ÿ™</button>
                    </div>
                </div>

                <!-- ŸæŸÜŸÑ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ≥ŸÅÿ± -->
                <div class="ride-panel">
                    <h2 class="panel-title"><i class="fas fa-map-marker-alt"></i> ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ≥ŸÅÿ±</h2>
                    
                    <form class="ride-form" id="rideForm">
                        <div class="form-group">
                            <label for="pickup">ŸÖÿ®ÿØÿß</label>
                            <div class="input-with-icon">
                                <i class="fas fa-circle input-icon" style="color: #00c569;"></i>
                                <input type="text" id="pickup" class="form-input" placeholder="ÿ¢ÿØÿ±ÿ≥ ŸÅÿπŸÑ€å ÿ¥ŸÖÿß" required>
                            </div>
                        </div>
                        
                        <div class="location-swap">
                            <button type="button" class="swap-btn" id="swapLocations">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label for="destination">ŸÖŸÇÿµÿØ</label>
                            <div class="input-with-icon">
                                <i class="fas fa-flag-checkered input-icon" style="color: #ff4757;"></i>
                                <input type="text" id="destination" class="form-input" placeholder="ŸÖÿ≠ŸÑ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ¥ŸÖÿß" required>
                            </div>
                        </div>

                        <!-- ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÇ€åŸÖÿ™ -->
                        <div class="trip-calculator" id="tripCalculator">
                            <div class="calculator-row">
                                <span>ŸÖÿ≥ÿßŸÅÿ™ ÿ™ÿÆŸÖ€åŸÜ€å:</span>
                                <span id="distanceValue">0 ⁄©€åŸÑŸàŸÖÿ™ÿ±</span>
                            </div>
                            <div class="calculator-row">
                                <span>⁄©ÿ±ÿß€åŸá Ÿæÿß€åŸá:</span>
                                <span id="baseFareValue">0 ÿßŸÅÿ∫ÿßŸÜ€å</span>
                            </div>
                            <div class="calculator-row">
                                <span>⁄©ÿ±ÿß€åŸá ŸÖÿ≥ÿßŸÅÿ™ (€µ ÿßŸÅÿ∫ÿßŸÜ€å/⁄©€åŸÑŸàŸÖÿ™ÿ±):</span>
                                <span id="distanceFareValue">0 ÿßŸÅÿ∫ÿßŸÜ€å</span>
                            </div>
                            <div class="calculator-row">
                                <span>Ÿáÿ≤€åŸÜŸá ŸÜŸáÿß€å€å:</span>
                                <span id="totalFareValue">0 ÿßŸÅÿ∫ÿßŸÜ€å</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>ŸÜŸàÿπ ÿ≥ŸÅÿ±</label>
                            <div class="ride-type-selector" id="rideTypeSelector">
                                <div class="ride-type economy" data-type="economy" data-base-fare="50">
                                    <div class="ride-type-info">
                                        <div class="ride-icon">
                                            <i class="fas fa-car"></i>
                                        </div>
                                        <div class="ride-details">
                                            <h3>ÿßŸÇÿ™ÿµÿßÿØ€å</h3>
                                            <p>ŸÖŸÜÿßÿ≥ÿ® ÿ®ÿ±ÿß€å ÿ≥ŸÅÿ±Ÿáÿß€å ÿ±Ÿàÿ≤ŸÖÿ±Ÿá</p>
                                        </div>
                                    </div>
                                    <div class="ride-price">
                                        <div id="economyPrice">-- ÿßŸÅÿ∫ÿßŸÜ€å</div>
                                        <div class="price-estimate">ÿ®ÿ±ÿ¢Ÿàÿ±ÿØ ŸÇ€åŸÖÿ™</div>
                                    </div>
                                </div>
                                <div class="ride-type comfort" data-type="comfort" data-base-fare="80">
                                    <div class="ride-type-info">
                                        <div class="ride-icon">
                                            <i class="fas fa-car-side"></i>
                                        </div>
                                        <div class="ride-details">
                                            <h3>⁄©ŸÑÿßÿ≥€å⁄©</h3>
                                            <p>ÿÆŸàÿØÿ±Ÿà€å ŸÖŸÜÿßÿ≥ÿ® Ÿà ÿ±ÿßÿ≠ÿ™</p>
                                        </div>
                                    </div>
                                    <div class="ride-price">
                                        <div id="comfortPrice">-- ÿßŸÅÿ∫ÿßŸÜ€å</div>
                                        <div class="price-estimate">ÿ®ÿ±ÿ¢Ÿàÿ±ÿØ ŸÇ€åŸÖÿ™</div>
                                    </div>
                                </div>
                                <div class="ride-type bike" data-type="bike" data-base-fare="30">
                                    <div class="ride-type-info">
                                        <div class="ride-icon">
                                            <i class="fas fa-motorcycle"></i>
                                        </div>
                                        <div class="ride-details">
                                            <h3>ŸÖŸàÿ™Ÿàÿ±</h3>
                                            <p>ÿ≥ÿ±€åÿπ Ÿà ŸÖŸÇÿ±ŸàŸÜ ÿ®Ÿá ÿµÿ±ŸÅŸá</p>
                                        </div>
                                    </div>
                                    <div class="ride-price">
                                        <div id="bikePrice">-- ÿßŸÅÿ∫ÿßŸÜ€å</div>
                                        <div class="price-estimate">ÿ®ÿ±ÿ¢Ÿàÿ±ÿØ ŸÇ€åŸÖÿ™</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÿ±Ÿàÿ¥ Ÿæÿ±ÿØÿßÿÆÿ™ -->
                        <div class="form-group">
                            <label>ÿ±Ÿàÿ¥ Ÿæÿ±ÿØÿßÿÆÿ™</label>
                            <div class="payment-methods">
                                <div class="payment-method" data-method="cash">
                                    <i class="fas fa-money-bill-wave"></i>
                                    <div>ŸÜŸÇÿØ€å</div>
                                </div>
                                <div class="payment-method" data-method="wallet">
                                    <i class="fas fa-wallet"></i>
                                    <div>⁄©€åŸÅ ŸæŸàŸÑ</div>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="submit-btn" id="submitBtn">
                            <i class="fas fa-search"></i>
                            ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿÆŸàÿØÿ±Ÿà
                        </button>
                    </form>

                    <!-- ŸÖŸÜÿßÿ∑ŸÇ ⁄©ÿßÿ®ŸÑ -->
                    <div class="kabul-districts">
                        <h3 class="districts-title"><i class="fas fa-map"></i> ŸÖŸÜÿßÿ∑ŸÇ ⁄©ÿßÿ®ŸÑ</h3>
                        <div class="districts-grid" id="districtsGrid">
                            <!-- ŸÖŸÜÿßÿ∑ŸÇ ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿØÿß€åŸÜÿßŸÖ€å⁄© ÿßÿ∂ÿßŸÅŸá ÿÆŸàÿßŸáŸÜÿØ ÿ¥ÿØ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ÿæ€åÿ¥ŸÜŸáÿßÿØÿßÿ™ ŸÖŸÇÿµÿØ -->
            <div class="suggestions">
                <h3 class="suggestions-title">ŸÖŸÇÿßÿµÿØ Ÿæÿ±ÿ∑ÿ±ŸÅÿØÿßÿ± ÿØÿ± ⁄©ÿßÿ®ŸÑ</h3>
                <div class="suggestion-list">
                    <div class="suggestion-item" data-destination="ŸÖ€åÿØÿßŸÜ ŸáŸàÿß€å€å ÿ®€åŸÜ ÿßŸÑŸÖŸÑŸÑ€å ⁄©ÿßÿ®ŸÑ">
                        <div class="suggestion-icon">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="suggestion-text">ŸÖ€åÿØÿßŸÜ ŸáŸàÿß€å€å ÿ®€åŸÜ ÿßŸÑŸÖŸÑŸÑ€å ⁄©ÿßÿ®ŸÑ</div>
                    </div>
                    <div class="suggestion-item" data-destination="ÿ≥ŸÅÿßÿ±ÿ™ ÿßŸÖÿ±€å⁄©ÿß">
                        <div class="suggestion-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="suggestion-text">ÿ≥ŸÅÿßÿ±ÿ™ ÿßŸÖÿ±€å⁄©ÿß</div>
                    </div>
                    <div class="suggestion-item" data-destination="ÿ≥ŸÅÿßÿ±ÿ™ ÿß€åÿ±ÿßŸÜ">
                        <div class="suggestion-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="suggestion-text">ÿ≥ŸÅÿßÿ±ÿ™ ÿß€åÿ±ÿßŸÜ</div>
                    </div>
                    <div class="suggestion-item" data-destination="ÿ≥ŸÅÿßÿ±ÿ™ Ÿæÿß⁄©ÿ≥ÿ™ÿßŸÜ">
                        <div class="suggestion-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="suggestion-text">ÿ≥ŸÅÿßÿ±ÿ™ Ÿæÿß⁄©ÿ≥ÿ™ÿßŸÜ</div>
                    </div>
                    <div class="suggestion-item" data-destination="Ÿàÿ≤ÿßÿ±ÿ™ ÿßŸÖŸàÿ± ÿÆÿßÿ±ÿ¨Ÿá">
                        <div class="suggestion-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="suggestion-text">Ÿàÿ≤ÿßÿ±ÿ™ ÿßŸÖŸàÿ± ÿÆÿßÿ±ÿ¨Ÿá</div>
                    </div>
                    <div class="suggestion-item" data-destination="ÿßÿ±⁄Ø ÿ±€åÿßÿ≥ÿ™ ÿ¨ŸÖŸáŸàÿ±€å">
                        <div class="suggestion-icon">
                            <i class="fas fa-monument"></i>
                        </div>
                        <div class="suggestion-text">ÿßÿ±⁄Ø ÿ±€åÿßÿ≥ÿ™ ÿ¨ŸÖŸáŸàÿ±€å</div>
                    </div>
                </div>
            </div>

            <!-- ÿ®ŸÜÿ± ÿ™ÿ®ŸÑ€åÿ∫ÿßÿ™€å -->
            <div class="promo-banner">
                <div class="promo-title">ÿßŸàŸÑ€åŸÜ ÿ≥ŸÅÿ± ÿ±ÿß€å⁄ØÿßŸÜ!</div>
                <div class="promo-desc">ÿ®ÿß ⁄©ÿØ WELCOME100 ÿßÿ≤ €±€∞€∞ ÿßŸÅÿ∫ÿßŸÜ€å ÿ™ÿÆŸÅ€åŸÅ ÿØÿ± ÿßŸàŸÑ€åŸÜ ÿ≥ŸÅÿ± ÿÆŸàÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ</div>
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ÿ≥ŸÅÿ±Ÿáÿß€å ŸÖŸÜ -->
        <div class="page" id="my-trips-page">
            <h2 class="page-title"><i class="fas fa-history"></i> ÿ≥ŸÅÿ±Ÿáÿß€å ŸÖŸÜ</h2>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ÿ™ÿßÿ±€åÿÆ</th>
                            <th>ŸÖÿ®ÿØÿß</th>
                            <th>ŸÖŸÇÿµÿØ</th>
                            <th>ŸÜŸàÿπ ÿ≥ŸÅÿ±</th>
                            <th>ŸÖÿ≥ÿßŸÅÿ™</th>
                            <th>Ÿáÿ≤€åŸÜŸá</th>
                            <th>Ÿàÿ∂ÿπ€åÿ™</th>
                            <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                        </tr>
                    </thead>
                    <tbody id="myTripsTable">
                        <!-- ÿ≥ŸÅÿ±Ÿáÿß€å ⁄©ÿßÿ±ÿ®ÿ± ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿØÿß€åŸÜÿßŸÖ€å⁄© ÿßÿ∂ÿßŸÅŸá ÿÆŸàÿßŸáŸÜÿØ ÿ¥ÿØ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ÿ™ÿÆŸÅ€åŸÅŸáÿß -->
        <div class="page" id="discounts-page">
            <h2 class="page-title"><i class="fas fa-gift"></i> ÿ™ÿÆŸÅ€åŸÅŸáÿß</h2>
            <div id="discountsList">
                <!-- ÿ™ÿÆŸÅ€åŸÅŸáÿß ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿØÿß€åŸÜÿßŸÖ€å⁄© ÿßÿ∂ÿßŸÅŸá ÿÆŸàÿßŸáŸÜÿØ ÿ¥ÿØ -->
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å -->
        <div class="page" id="support-page">
            <h2 class="page-title"><i class="fas fa-question-circle"></i> Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å</h2>
            
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message received">
                        ÿ≥ŸÑÿßŸÖ! ÿ®Ÿá Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ. ⁄Ü⁄ØŸàŸÜŸá ŸÖ€åÿ™ŸàÿßŸÜŸÖ ⁄©ŸÖ⁄©ÿ™ÿßŸÜ ⁄©ŸÜŸÖÿü
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Ÿæ€åÿßŸÖ ÿÆŸàÿØ ÿ±ÿß ÿ®ŸÜŸà€åÿ≥€åÿØ...">
                    <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            
            <div class="support-info" style="margin-top: 30px;">
                <h3>ÿ±ÿßŸáŸáÿß€å ÿßÿ±ÿ™ÿ®ÿßÿ∑€å</h3>
                <p>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥: €∞€∑€∞€∞€±€≤€≥€¥€µ€∂</p>
                <p>ÿß€åŸÖ€åŸÑ: support@snapp.af</p>
                <p>ÿ≥ÿßÿπÿßÿ™ Ÿæÿßÿ≥ÿÆ⁄ØŸà€å€å: €≤€¥ ÿ≥ÿßÿπÿ™Ÿá</p>
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá Ÿæÿ±ŸàŸÅÿß€åŸÑ -->
        <div class="page" id="profile-page">
            <h2 class="page-title"><i class="fas fa-user"></i> Ÿæÿ±ŸàŸÅÿß€åŸÑ</h2>
            
            <div class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">ÿß</div>
                    <div class="profile-info">
                        <h3 id="profileName">ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å</h3>
                        <p id="profileEmail">ahmad@example.com</p>
                        <p id="profilePhone">€∞€∑€∞€∞€±€±€±€≤€≤€≤</p>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="value" id="totalTripsCount">€±€≤</div>
                        <div class="label">ÿ™ÿπÿØÿßÿØ ÿ≥ŸÅÿ±Ÿáÿß</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalSpent">€±,€≥€¥€∞</div>
                        <div class="label">ÿßŸÅÿ∫ÿßŸÜ€å Ÿáÿ≤€åŸÜŸá ÿ¥ÿØŸá</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="userRating">€¥.€∑</div>
                        <div class="label">ÿßŸÖÿ™€åÿßÿ≤ ÿ¥ŸÖÿß</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editName">ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ</label>
                    <input type="text" id="editName" class="form-input" value="ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å">
                </div>
                
                <div class="form-group">
                    <label for="editEmail">ÿß€åŸÖ€åŸÑ</label>
                    <input type="email" id="editEmail" class="form-input" value="ahmad@example.com">
                </div>
                
                <div class="form-group">
                    <label for="editPhone">ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</label>
                    <input type="tel" id="editPhone" class="form-input" value="0700111222">
                </div>
                
                <button class="btn btn-primary" id="saveProfile">ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™</button>
            </div>
        </div>

        <!-- ÿµŸÅÿ≠Ÿá ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ -->
        <div class="page admin-panel" id="admin-page">
            <h2 class="page-title"><i class="fas fa-cog"></i> ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>ÿ™ÿπÿØÿßÿØ ÿ≥ŸÅÿ±Ÿáÿß</h3>
                    <div class="value" id="totalTrips">0</div>
                </div>
                <div class="stat-card">
                    <h3>⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ŸÅÿπÿßŸÑ</h3>
                    <div class="value" id="activeUsers">0</div>
                </div>
                <div class="stat-card">
                    <h3>ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ</h3>
                    <div class="value" id="totalDrivers">0</div>
                </div>
                <div class="stat-card">
                    <h3>ÿØÿ±ÿ¢ŸÖÿØ ⁄©ŸÑ</h3>
                    <div class="value" id="totalRevenue">0 ÿßŸÅÿ∫ÿßŸÜ€å</div>
                </div>
            </div>
            
            <div class="admin-tabs">
                <div class="admin-tab active" data-tab="users">ŸÖÿØ€åÿ±€åÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ</div>
                <div class="admin-tab" data-tab="drivers">ŸÖÿØ€åÿ±€åÿ™ ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ</div>
                <div class="admin-tab" data-tab="trips">ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸÅÿ±Ÿáÿß</div>
                <div class="admin-tab" data-tab="discounts">ŸÖÿØ€åÿ±€åÿ™ ÿ™ÿÆŸÅ€åŸÅŸáÿß</div>
                <div class="admin-tab" data-tab="support">ŸÖÿØ€åÿ±€åÿ™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å</div>
            </div>
            
            <div class="admin-tab-content active" id="users-tab">
                <h3>⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿß€å€åÿØ</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ŸÜÿßŸÖ</th>
                                <th>ÿß€åŸÖ€åŸÑ</th>
                                <th>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</th>
                                <th>ŸÜŸàÿπ ⁄©ÿßÿ±ÿ®ÿ±</th>
                                <th>ÿ™ÿßÿ±€åÿÆ ÿ´ÿ®ÿ™ŸÜÿßŸÖ</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody id="pendingUsersTable">
                            <!-- ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿß€å€åÿØ -->
                        </tbody>
                    </table>
                </div>
                
                <h3 style="margin-top: 30px;">ŸáŸÖŸá ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ŸÜÿßŸÖ</th>
                                <th>ÿß€åŸÖ€åŸÑ</th>
                                <th>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</th>
                                <th>ŸÜŸàÿπ ⁄©ÿßÿ±ÿ®ÿ±</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿ™ÿßÿ±€åÿÆ ÿ´ÿ®ÿ™ŸÜÿßŸÖ</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody id="allUsersTable">
                            <!-- ŸáŸÖŸá ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="admin-tab-content" id="drivers-tab">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ŸÖÿØ€åÿ±€åÿ™ ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ</h3>
                    <button class="btn btn-primary" id="addDriverBtn">ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá ÿ¨ÿØ€åÿØ</button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ŸÜÿßŸÖ</th>
                                <th>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</th>
                                <th>ŸÜŸàÿπ Ÿàÿ≥€åŸÑŸá</th>
                                <th>ŸÖÿØŸÑ ÿÆŸàÿØÿ±Ÿà</th>
                                <th>ŸæŸÑÿß⁄©</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody id="driversTable">
                            <!-- ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="admin-tab-content" id="trips-tab">
                <h3>ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸÅÿ±Ÿáÿß</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ÿ™ÿßÿ±€åÿÆ</th>
                                <th>ŸÖÿ≥ÿßŸÅÿ±</th>
                                <th>ŸÖÿ®ÿØÿß</th>
                                <th>ŸÖŸÇÿµÿØ</th>
                                <th>Ÿáÿ≤€åŸÜŸá</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody id="adminTripsTable">
                            <!-- ÿ≥ŸÅÿ±Ÿáÿß -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="admin-tab-content" id="discounts-tab">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ŸÖÿØ€åÿ±€åÿ™ ÿ™ÿÆŸÅ€åŸÅŸáÿß</h3>
                    <button class="btn btn-primary" id="addDiscountBtn">ÿßŸÅÿ≤ŸàÿØŸÜ ÿ™ÿÆŸÅ€åŸÅ ÿ¨ÿØ€åÿØ</button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>⁄©ÿØ ÿ™ÿÆŸÅ€åŸÅ</th>
                                <th>ÿØÿ±ÿµÿØ ÿ™ÿÆŸÅ€åŸÅ</th>
                                <th>ÿ™ÿßÿ±€åÿÆ ÿßŸÜŸÇÿ∂ÿß</th>
                                <th>⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿßÿ≥ÿ™ŸÅÿßÿØŸá⁄©ŸÜŸÜÿØŸá</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody id="discountsTable">
                            <!-- ÿ™ÿÆŸÅ€åŸÅŸáÿß -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="admin-tab-content" id="support-tab">
                <h3>ŸÖÿØ€åÿ±€åÿ™ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™Ÿáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>⁄©ÿßÿ±ÿ®ÿ±</th>
                                <th>ŸÖŸàÿ∂Ÿàÿπ</th>
                                <th>Ÿæ€åÿßŸÖ</th>
                                <th>ÿ™ÿßÿ±€åÿÆ</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody id="adminSupportTable">
                            <!-- ÿØÿ±ÿÆŸàÿßÿ≥ÿ™Ÿáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ ÿ±ÿßŸÜŸÜÿØŸá -->
    <div class="modal" id="driverModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-check-circle"></i> ÿ±ÿßŸÜŸÜÿØŸá Ÿæ€åÿØÿß ÿ¥ÿØ!</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            
            <div class="driver-info">
                <div class="driver-details">
                    <div class="driver-avatar" id="driverAvatar">ÿß</div>
                    <div class="driver-name-rating">
                        <h3 id="driverName">ÿßÿ≠ŸÖÿØ ÿ∏ÿßŸáÿ±</h3>
                        <div class="driver-rating">
                            <i class="fas fa-star"></i>
                            <span id="driverRating">€¥.€∑</span>
                            <span id="driverTrips">(€±€≤€µ ÿ≥ŸÅÿ±)</span>
                        </div>
                    </div>
                </div>
                
                <div class="car-details">
                    <div class="car-info">
                        <div class="car-model" id="carModel">ÿ™Ÿà€åŸàÿ™ÿß ⁄©Ÿàÿ±ŸàŸÑÿß</div>
                        <div class="car-color" id="carColor">ÿ≥ŸÅ€åÿØ</div>
                    </div>
                    <div class="car-plate" id="plateNumber">⁄©ÿßÿ®ŸÑ €±€≤€≥€¥</div>
                </div>
            </div>
            
            <div class="trip-info">
                <div class="trip-detail">
                    <i class="fas fa-clock"></i>
                    <span>ÿ≤ŸÖÿßŸÜ ÿ±ÿ≥€åÿØŸÜ</span>
                    <div class="value" id="eta">€¥ ÿØŸÇ€åŸÇŸá</div>
                </div>
                <div class="trip-detail">
                    <i class="fas fa-road"></i>
                    <span>ŸÖÿ≥ÿßŸÅÿ™</span>
                    <div class="value" id="distance">€≤.€∏ ⁄©€åŸÑŸàŸÖÿ™ÿ±</div>
                </div>
                <div class="trip-detail">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Ÿáÿ≤€åŸÜŸá</span>
                    <div class="value" id="price">€±€µ€∞ ÿßŸÅÿ∫ÿßŸÜ€å</div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-outline" id="cancelRide">ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±</button>
                <button class="btn btn-primary" id="confirmRide">ÿ™ÿ£€å€åÿØ ÿ≥ŸÅÿ±</button>
            </div>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å -->
    <div class="modal" id="ratingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-star"></i> ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å ÿ®Ÿá ÿ±ÿßŸÜŸÜÿØŸá</h2>
                <button class="close-modal" id="closeRatingModal">&times;</button>
            </div>
            
            <div style="text-align: center; padding: 20px 0;">
                <div class="driver-details" style="justify-content: center; margin-bottom: 20px;">
                    <div class="driver-avatar" id="ratingDriverAvatar">ÿß</div>
                    <div class="driver-name-rating">
                        <h3 id="ratingDriverName">ÿßÿ≠ŸÖÿØ ÿ∏ÿßŸáÿ±</h3>
                    </div>
                </div>
                
                <p>ŸÑÿ∑ŸÅÿßŸã ÿ®Ÿá ÿ±ÿßŸÜŸÜÿØŸá ÿßŸÖÿ™€åÿßÿ≤ ÿØŸá€åÿØ</p>
                
                <div class="rating-stars" id="ratingStars">
                    <i class="fas fa-star rating-star" data-rating="1"></i>
                    <i class="fas fa-star rating-star" data-rating="2"></i>
                    <i class="fas fa-star rating-star" data-rating="3"></i>
                    <i class="fas fa-star rating-star" data-rating="4"></i>
                    <i class="fas fa-star rating-star" data-rating="5"></i>
                </div>
                
                <textarea id="ratingComment" placeholder="ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ŸÜŸà€åÿ≥€åÿØ (ÿßÿÆÿ™€åÿßÿ±€å)" style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; margin-top: 15px; resize: vertical;"></textarea>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-primary" id="submitRating">ÿ´ÿ®ÿ™ ÿßŸÖÿ™€åÿßÿ≤</button>
            </div>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ Ÿæÿ±ÿØÿßÿÆÿ™ -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-credit-card"></i> Ÿæÿ±ÿØÿßÿÆÿ™</h2>
                <button class="close-modal" id="closePaymentModal">&times;</button>
            </div>
            
            <div style="padding: 20px 0;">
                <div class="trip-info">
                    <div class="trip-detail">
                        <i class="fas fa-road"></i>
                        <span>ŸÖÿ≥ÿßŸÅÿ™</span>
                        <div class="value" id="paymentDistance">€≤.€∏ ⁄©€åŸÑŸàŸÖÿ™ÿ±</div>
                    </div>
                    <div class="trip-detail">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Ÿáÿ≤€åŸÜŸá</span>
                        <div class="value" id="paymentPrice">€±€µ€∞ ÿßŸÅÿ∫ÿßŸÜ€å</div>
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label>ÿ±Ÿàÿ¥ Ÿæÿ±ÿØÿßÿÆÿ™</label>
                    <div class="payment-methods">
                        <div class="payment-method selected" data-method="cash">
                            <i class="fas fa-money-bill-wave"></i>
                            <div>ŸÜŸÇÿØ€å</div>
                        </div>
                        <div class="payment-method" data-method="wallet">
                            <i class="fas fa-wallet"></i>
                            <div>⁄©€åŸÅ ŸæŸàŸÑ</div>
                        </div>
                    </div>
                </div>
                
                <div id="walletPayment" style="display: none; margin-top: 15px;">
                    <div class="form-group">
                        <label>ŸÖŸàÿ¨ŸàÿØ€å ⁄©€åŸÅ ŸæŸàŸÑ: <span id="walletBalance">€µ€∞€∞</span> ÿßŸÅÿ∫ÿßŸÜ€å</label>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-outline" id="cancelPayment">ÿßŸÜÿµÿ±ÿßŸÅ</button>
                <button class="btn btn-primary" id="confirmPayment">Ÿæÿ±ÿØÿßÿÆÿ™</button>
            </div>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ Ÿàÿ±ŸàÿØ/ÿ´ÿ®ÿ™ŸÜÿßŸÖ -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-user"></i> Ÿàÿ±ŸàÿØ / ÿ´ÿ®ÿ™ŸÜÿßŸÖ</h2>
                <button class="close-modal" id="closeAuthModal">&times;</button>
            </div>
            
            <div class="form-tabs">
                <div class="form-tab active" data-tab="login">Ÿàÿ±ŸàÿØ</div>
                <div class="form-tab" data-tab="register">ÿ´ÿ®ÿ™ŸÜÿßŸÖ</div>
            </div>
            
            <div class="form-tab-content active" id="login-tab">
                <form class="auth-form" id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</label>
                        <div class="input-with-icon">
                            <i class="fas fa-envelope input-icon"></i>
                            <input type="text" id="loginEmail" class="form-input" placeholder="ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                        </div>
                        <div class="error-message" id="loginEmailError"></div>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="loginPassword" class="form-input" placeholder="ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                            <button type="button" class="password-toggle" id="loginPasswordToggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="loginPasswordError"></div>
                    </div>
                    <div class="form-footer">
                        <a href="#" id="forgotPassword">ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß ŸÅÿ±ÿßŸÖŸàÿ¥ ⁄©ÿ±ÿØŸáÿß€åÿØÿü</a>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginSubmitBtn">Ÿàÿ±ŸàÿØ</button>
                </form>
            </div>
            
            <div class="form-tab-content" id="register-tab">
                <form class="auth-form" id="registerForm">
                    <div class="form-group">
                        <label for="registerName">ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ</label>
                        <div class="input-with-icon">
                            <i class="fas fa-user input-icon"></i>
                            <input type="text" id="registerName" class="form-input" placeholder="ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                        </div>
                        <div class="error-message" id="registerNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">ÿß€åŸÖ€åŸÑ</label>
                        <div class="input-with-icon">
                            <i class="fas fa-envelope input-icon"></i>
                            <input type="email" id="registerEmail" class="form-input" placeholder="ÿß€åŸÖ€åŸÑ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                        </div>
                        <div class="error-message" id="registerEmailError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerPhone">ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</label>
                        <div class="input-with-icon">
                            <i class="fas fa-phone input-icon"></i>
                            <input type="tel" id="registerPhone" class="form-input" placeholder="ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                        </div>
                        <div class="error-message" id="registerPhoneError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="registerPassword" class="form-input" placeholder="ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                            <button type="button" class="password-toggle" id="registerPasswordToggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="registerPasswordError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerConfirmPassword">ÿ™⁄©ÿ±ÿßÿ± ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="registerConfirmPassword" class="form-input" placeholder="ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß ŸÖÿ¨ÿØÿØÿßŸã Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                            <button type="button" class="password-toggle" id="registerConfirmPasswordToggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="registerConfirmPasswordError"></div>
                    </div>
                    <div class="form-group">
                        <label for="userType">ŸÜŸàÿπ ⁄©ÿßÿ±ÿ®ÿ±</label>
                        <select id="userType" class="form-input" required>
                            <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
                            <option value="passenger">ŸÖÿ≥ÿßŸÅÿ±</option>
                            <option value="driver">ÿ±ÿßŸÜŸÜÿØŸá</option>
                        </select>
                        <div class="error-message" id="userTypeError"></div>
                    </div>
                    <div class="form-footer">
                        ÿ®ÿß ÿ´ÿ®ÿ™ŸÜÿßŸÖÿå <a href="#">ŸÇŸàÿßŸÜ€åŸÜ Ÿà ŸÖŸÇÿ±ÿ±ÿßÿ™</a> ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ ÿ±ÿß ŸÖ€åŸæÿ∞€åÿ±€åÿØ.
                    </div>
                    <button type="submit" class="btn btn-primary" id="registerSubmitBtn">ÿ´ÿ®ÿ™ŸÜÿßŸÖ</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± -->
    <div class="modal" id="forgotPasswordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-key"></i> ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±</h2>
                <button class="close-modal" id="closeForgotPasswordModal">&times;</button>
            </div>
            
            <form class="auth-form" id="forgotPasswordForm">
                <div class="form-group">
                    <label for="forgotPasswordEmail">ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</label>
                    <div class="input-with-icon">
                        <i class="fas fa-envelope input-icon"></i>
                        <input type="text" id="forgotPasswordEmail" class="form-input" placeholder="ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ" required>
                    </div>
                    <div class="error-message" id="forgotPasswordEmailError"></div>
                </div>
                <div class="form-footer">
                    ŸÑ€åŸÜ⁄© ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿ®Ÿá ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿ¥ŸÖÿß ÿßÿ±ÿ≥ÿßŸÑ ÿÆŸàÿßŸáÿØ ÿ¥ÿØ.
                </div>
                <button type="submit" class="btn btn-primary" id="forgotPasswordSubmitBtn">ÿßÿ±ÿ≥ÿßŸÑ ŸÑ€åŸÜ⁄© ÿ®ÿßÿ≤€åÿßÿ®€å</button>
            </form>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá -->
    <div class="modal" id="addDriverModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-user-plus"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá ÿ¨ÿØ€åÿØ</h2>
                <button class="close-modal" id="closeAddDriverModal">&times;</button>
            </div>
            
            <form class="auth-form" id="addDriverForm">
                <div class="form-group">
                    <label for="driverName">ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ</label>
                    <input type="text" id="driverName" class="form-input" placeholder="ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ ÿ±ÿßŸÜŸÜÿØŸá" required>
                </div>
                <div class="form-group">
                    <label for="driverEmail">ÿß€åŸÖ€åŸÑ</label>
                    <input type="email" id="driverEmail" class="form-input" placeholder="ÿß€åŸÖ€åŸÑ ÿ±ÿßŸÜŸÜÿØŸá" required>
                </div>
                <div class="form-group">
                    <label for="driverPhone">ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</label>
                    <input type="tel" id="driverPhone" class="form-input" placeholder="ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿ±ÿßŸÜŸÜÿØŸá" required>
                </div>
                <div class="form-group">
                    <label for="vehicleType">ŸÜŸàÿπ Ÿàÿ≥€åŸÑŸá</label>
                    <select id="vehicleType" class="form-input" required>
                        <option value="car">ÿÆŸàÿØÿ±Ÿà</option>
                        <option value="bike">ŸÖŸàÿ™Ÿàÿ±</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="carModel">ŸÖÿØŸÑ ÿÆŸàÿØÿ±Ÿà</label>
                    <input type="text" id="carModelInput" class="form-input" placeholder="ŸÖÿØŸÑ ÿÆŸàÿØÿ±Ÿà" required>
                </div>
                <div class="form-group">
                    <label for="carColor">ÿ±ŸÜ⁄Ø ÿÆŸàÿØÿ±Ÿà</label>
                    <input type="text" id="carColorInput" class="form-input" placeholder="ÿ±ŸÜ⁄Ø ÿÆŸàÿØÿ±Ÿà" required>
                </div>
                <div class="form-group">
                    <label for="plateNumber">ÿ¥ŸÖÿßÿ±Ÿá ŸæŸÑÿß⁄©</label>
                    <input type="text" id="plateNumberInput" class="form-input" placeholder="ÿ¥ŸÖÿßÿ±Ÿá ŸæŸÑÿß⁄©" required>
                </div>
                <button type="submit" class="btn btn-primary">ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá</button>
            </form>
        </div>
    </div>

    <!-- ŸÖÿØÿßŸÑ ÿßŸÅÿ≤ŸàÿØŸÜ ÿ™ÿÆŸÅ€åŸÅ -->
    <div class="modal" id="addDiscountModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-tag"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ÿ™ÿÆŸÅ€åŸÅ ÿ¨ÿØ€åÿØ</h2>
                <button class="close-modal" id="closeAddDiscountModal">&times;</button>
            </div>
            
            <form class="auth-form" id="addDiscountForm">
                <div class="form-group">
                    <label for="discountCode">⁄©ÿØ ÿ™ÿÆŸÅ€åŸÅ</label>
                    <input type="text" id="discountCode" class="form-input" placeholder="⁄©ÿØ ÿ™ÿÆŸÅ€åŸÅ" required>
                </div>
                <div class="form-group">
                    <label for="discountPercent">ÿØÿ±ÿµÿØ ÿ™ÿÆŸÅ€åŸÅ</label>
                    <input type="number" id="discountPercent" class="form-input" placeholder="ÿØÿ±ÿµÿØ ÿ™ÿÆŸÅ€åŸÅ" min="1" max="100" required>
                </div>
                <div class="form-group">
                    <label for="discountExpiry">ÿ™ÿßÿ±€åÿÆ ÿßŸÜŸÇÿ∂ÿß</label>
                    <input type="date" id="discountExpiry" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="maxUses">ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿßÿ≥ÿ™ŸÅÿßÿØŸá</label>
                    <input type="number" id="maxUses" class="form-input" placeholder="ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿ™ÿπÿØÿßÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá" min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">ÿßŸÅÿ≤ŸàÿØŸÜ ÿ™ÿÆŸÅ€åŸÅ</button>
            </form>
        </div>
    </div>

    <!-- ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ -->
    <div class="notification" id="notification"></div>

    <!-- ŸÅŸàÿ™ÿ± -->
    <footer style="display: none;" id="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ</h3>
                    <ul class="footer-links">
                        <li><a href="#">ÿØÿ±ÿ®ÿßÿ±Ÿá ŸÖÿß</a></li>
                        <li><a href="#">ŸÅÿ±ÿµÿ™Ÿáÿß€å ⁄©ÿßÿ±€å</a></li>
                        <li><a href="#">ÿ™ŸÖÿßÿ≥ ÿ®ÿß ŸÖÿß</a></li>
                        <li><a href="#">Ÿàÿ®ŸÑÿß⁄Ø</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>ÿÆÿØŸÖÿßÿ™</h3>
                    <ul class="footer-links">
                        <li><a href="#">ÿ™ÿß⁄©ÿ≥€å</a></li>
                        <li><a href="#">Ÿæ€å⁄©</a></li>
                        <li><a href="#">ŸÖŸàÿ™Ÿàÿ±</a></li>
                        <li><a href="#">ÿ®ÿßÿ≤ÿßÿ±</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>ŸÖÿ≥ÿßŸÅÿ±ÿßŸÜ</h3>
                    <ul class="footer-links">
                        <li><a href="#">ÿØÿßŸÜŸÑŸàÿØ ÿßŸæŸÑ€å⁄©€åÿ¥ŸÜ</a></li>
                        <li><a href="#">ŸÇŸàÿßŸÜ€åŸÜ Ÿà ŸÖŸÇÿ±ÿ±ÿßÿ™</a></li>
                        <li><a href="#">ÿ≥ŸàÿßŸÑÿßÿ™ ŸÖÿ™ÿØÿßŸàŸÑ</a></li>
                        <li><a href="#">ÿ≠ÿ±€åŸÖ ÿÆÿµŸàÿµ€å</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿß ŸÖÿß</h3>
                    <p>Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å €≤€¥ ÿ≥ÿßÿπÿ™Ÿá</p>
                    <p>ÿ¥ŸÖÿßÿ±Ÿá: €∞€∑€∞€∞€±€≤€≥€¥€µ€∂</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© €±€¥€∞€≥ ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ. ÿ™ŸÖÿßŸÖ€å ÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ ÿßÿ≥ÿ™.</p>
            </div>
        </div>
    </footer>

    <script>
        // ÿØÿßÿØŸáŸáÿß€å ŸÖŸÜÿßÿ∑ŸÇ Ÿà ŸÜŸÇÿßÿ∑ ŸÖŸáŸÖ ⁄©ÿßÿ®ŸÑ
        const kabulLocations = [
            // ŸÖŸÜÿßÿ∑ŸÇ ŸÖÿ±⁄©ÿ≤€å
            { name: "ŸÖ€åÿØÿßŸÜ ŸáŸàÿß€å€å", x: 65, y: 45 },
            { name: "⁄©ÿßÿ±ÿ™Ÿá ÿ≥ÿÆ€å", x: 60, y: 60 },
            { name: "⁄©ÿßÿ±ÿ™Ÿá ⁄ÜŸáÿßÿ±", x: 55, y: 50 },
            { name: "ÿ¥Ÿáÿ± ŸÜŸà", x: 50, y: 55 },
            { name: "ÿØÿ¥ÿ™ ÿ®ÿ±⁄Ü€å", x: 40, y: 65 },
            { name: "ŸÇŸÑÿπŸá ŸÜŸàÿ±", x: 45, y: 40 },
            
            // ÿ≥ŸÅÿßÿ±ÿ™ÿÆÿßŸÜŸáŸáÿß
            { name: "ÿ≥ŸÅÿßÿ±ÿ™ ÿßŸÖÿ±€å⁄©ÿß", x: 75, y: 25 },
            { name: "ÿ≥ŸÅÿßÿ±ÿ™ ÿß€åÿ±ÿßŸÜ", x: 65, y: 30 },
            { name: "ÿ≥ŸÅÿßÿ±ÿ™ Ÿæÿß⁄©ÿ≥ÿ™ÿßŸÜ", x: 60, y: 35 },
            
            // Ÿàÿ≤ÿßÿ±ÿ™ÿÆÿßŸÜŸáŸáÿß
            { name: "ÿßÿ±⁄Ø ÿ±€åÿßÿ≥ÿ™ ÿ¨ŸÖŸáŸàÿ±€å", x: 70, y: 20 },
            { name: "Ÿàÿ≤ÿßÿ±ÿ™ ÿßŸÖŸàÿ± ÿÆÿßÿ±ÿ¨Ÿá", x: 65, y: 15 },
            
            // ŸÖÿ±ÿß⁄©ÿ≤ ÿÆÿ±€åÿØ
            { name: "ÿ®ÿßÿ≤ÿßÿ± ⁄©ÿßÿ®ŸÑ", x: 50, y: 45 },
            { name: "ÿ®ÿßÿ≤ÿßÿ± ⁄©ÿßÿ±ÿ™Ÿá ÿ≥ÿÆ€å", x: 58, y: 58 },
            
            // ÿØÿßŸÜÿ¥⁄ØÿßŸáŸáÿß
            { name: "ŸæŸàŸáŸÜÿ™ŸàŸÜ ⁄©ÿßÿ®ŸÑ", x: 40, y: 35 },
            { name: "ŸæŸàŸáŸÜÿ™ŸàŸÜ ŸæŸàŸÑ€å ÿ™ÿÆŸÜ€å⁄© ⁄©ÿßÿ®ŸÑ", x: 35, y: 40 },
            
            // ÿ¥ŸÅÿßÿÆÿßŸÜŸáŸáÿß
            { name: "ÿ¥ŸÅÿßÿÆÿßŸÜŸá ÿπŸÑ€å ÿ¢ÿ®ÿßÿØ", x: 45, y: 50 },
            { name: "ÿ¥ŸÅÿßÿÆÿßŸÜŸá ÿ¨ŸÖŸáŸàÿ±€åÿ™", x: 65, y: 40 }
        ];

        // ŸÖŸÜÿßÿ∑ŸÇ ⁄©ÿßÿ®ŸÑ
        const kabulDistricts = [
            "⁄©ÿßÿ±ÿ™Ÿá ÿ≥ÿÆ€å", "⁄©ÿßÿ±ÿ™Ÿá ⁄ÜŸáÿßÿ±", "ÿ¥Ÿáÿ± ŸÜŸà", "ÿØÿ¥ÿ™ ÿ®ÿ±⁄Ü€å", "ŸÇŸÑÿπŸá ŸÜŸàÿ±",
            "ŸÇŸÑÿπŸá ŸÅÿ™ÿ≠ ÿßŸÑŸÑŸá", "Ÿæÿ∫ŸÖÿßŸÜ", "ŸÖ⁄©ÿ±Ÿàÿ±€åÿßŸÜ", "ÿÆ€åÿ±ÿÆÿßŸÜŸá", "ŸÇŸÑÿπŸá ÿ∞ŸàÿßŸÑŸÅŸÇÿßÿ±",
            "⁄ÜŸÜÿØŸàŸÑ", "ÿØŸá ÿ≥ÿ®ÿ≤", "ÿßŸÅÿ¥ÿßÿ±", "ŸÇÿ±Ÿá ÿ®ÿßÿ∫", "ÿ®⁄Øÿ±ÿßŸÖ€å"
        ];

        // ÿÆ€åÿßÿ®ÿßŸÜŸáÿß€å ÿßÿµŸÑ€å ⁄©ÿßÿ®ŸÑ
        const kabulStreets = [
            // ÿÆ€åÿßÿ®ÿßŸÜŸáÿß€å ÿßÿµŸÑ€å
            { name: "ÿ¨ÿßÿØŸá ŸÖ€åÿØÿßŸÜ", x: 30, y: 50, width: 40, height: 4, main: true },
            { name: "ÿ¨ÿßÿØŸá ⁄©ÿßÿ±ÿ™Ÿá ÿ≥ÿÆ€å", x: 55, y: 30, width: 4, height: 40, main: true },
            { name: "ÿ¨ÿßÿØŸá ÿ¥Ÿáÿ± ŸÜŸà", x: 45, y: 40, width: 4, height: 30, main: true },
            { name: "ÿ¨ÿßÿØŸá ÿØÿ¥ÿ™ ÿ®ÿ±⁄Ü€å", x: 35, y: 60, width: 30, height: 4, main: true },
            
            // ÿÆ€åÿßÿ®ÿßŸÜŸáÿß€å ŸÅÿ±ÿπ€å
            { name: "ÿ≥ÿ±⁄© ⁄©ÿßÿ±ÿ™Ÿá ⁄ÜŸáÿßÿ±", x: 50, y: 45, width: 20, height: 3, main: false },
            { name: "ÿ≥ÿ±⁄© Ÿæÿ∫ŸÖÿßŸÜ", x: 25, y: 40, width: 3, height: 20, main: false },
            { name: "ÿ≥ÿ±⁄© ŸÇŸÑÿπŸá ŸÜŸàÿ±", x: 40, y: 35, width: 15, height: 3, main: false },
            { name: "ÿ≥ÿ±⁄© ÿÆ€åÿ±ÿÆÿßŸÜŸá", x: 60, y: 50, width: 3, height: 15, main: false }
        ];

        // ŸÖÿ™ÿ∫€åÿ±Ÿáÿß€å ÿπŸÖŸàŸÖ€å
        let selectedRideType = 'economy';
        let currentDistance = 0;
        let currentPrice = 0;
        let currentUser = null;
        let currentTripId = null;
        let isAdmin = false;
        let carMarker = null;
        let carAnimationInterval = null;
        let activeDrivers = [];
        let activeTrips = [];
        let currentRoute = null;
        let currentDriver = null;
        let selectedPaymentMethod = 'cash';
        let trackingInterval = null;

        // ŸÜŸÖÿß€åÿ¥ ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            
            if (type === 'error') {
                notification.classList.add('error');
            }
            
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // ŸÜŸÖÿß€åÿ¥ ÿÆÿ∑ÿß ÿØÿ± ŸÅÿ±ŸÖ
        function showError(inputId, message) {
            const errorElement = document.getElementById(inputId + 'Error');
            const inputElement = document.getElementById(inputId);
            
            if (errorElement && inputElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                inputElement.style.borderColor = 'var(--afghan-red)';
            }
        }

        // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿÆÿ∑ÿßŸáÿß
        function clearErrors() {
            const errorElements = document.querySelectorAll('.error-message');
            const inputElements = document.querySelectorAll('.form-input');
            
            errorElements.forEach(element => {
                element.style.display = 'none';
            });
            
            inputElements.forEach(element => {
                element.style.borderColor = 'var(--border)';
            });
        }

        // ÿß€åÿ¨ÿßÿØ ŸÜŸÇÿ¥Ÿá ⁄©ÿßÿ®ŸÑ
        function createKabulMap() {
            const map = document.getElementById('kabulMap');
            if (!map) return;
            
            // ÿß€åÿ¨ÿßÿØ ÿÆ€åÿßÿ®ÿßŸÜŸáÿß
            kabulStreets.forEach(street => {
                const streetElement = document.createElement('div');
                streetElement.className = 'street';
                if (street.main) {
                    streetElement.classList.add('main-street');
                }
                streetElement.style.left = `${street.x}%`;
                streetElement.style.top = `${street.y}%`;
                streetElement.style.width = `${street.width}%`;
                streetElement.style.height = `${street.height}%`;
                
                map.appendChild(streetElement);
            });
            
            // ÿß€åÿ¨ÿßÿØ ŸÜŸÇÿßÿ∑ ŸÖŸáŸÖ
            kabulLocations.forEach(location => {
                const marker = document.createElement('div');
                marker.className = 'location-marker';
                marker.style.left = `${location.x}%`;
                marker.style.top = `${location.y}%`;
                marker.setAttribute('data-name', location.name);
                
                marker.addEventListener('click', () => {
                    const pickupInput = document.getElementById('pickup');
                    const destinationInput = document.getElementById('destination');
                    
                    if (!pickupInput || !destinationInput) return;
                    
                    if (!pickupInput.value) {
                        pickupInput.value = location.name;
                        showNotification(`ŸÖÿ®ÿØÿß ÿ®Ÿá "${location.name}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                    } else if (!destinationInput.value) {
                        destinationInput.value = location.name;
                        showNotification(`ŸÖŸÇÿµÿØ ÿ®Ÿá "${location.name}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                    } else {
                        // ÿß⁄Øÿ± Ÿáÿ± ÿØŸà Ÿæÿ± Ÿáÿ≥ÿ™ŸÜÿØÿå ÿßÿ≤ ⁄©ÿßÿ±ÿ®ÿ± ÿ®Ÿæÿ±ÿ≥€åŸÖ
                        if (confirm(`ÿ¢€åÿß ŸÖ€åÿÆŸàÿßŸá€åÿØ "${location.name}" ÿ±ÿß ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ŸÖŸÇÿµÿØ ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØÿü`)) {
                            destinationInput.value = location.name;
                            showNotification(`ŸÖŸÇÿµÿØ ÿ®Ÿá "${location.name}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                        }
                    }
                    calculateDistanceAndPrice();
                });
                
                map.appendChild(marker);
            });
        }

        // ÿß€åÿ¨ÿßÿØ ŸÑ€åÿ≥ÿ™ ŸÖŸÜÿßÿ∑ŸÇ
        function createDistrictsList() {
            const districtsGrid = document.getElementById('districtsGrid');
            if (!districtsGrid) return;
            
            kabulDistricts.forEach(district => {
                const districtItem = document.createElement('div');
                districtItem.className = 'district-item';
                districtItem.textContent = district;
                
                districtItem.addEventListener('click', () => {
                    const pickupInput = document.getElementById('pickup');
                    const destinationInput = document.getElementById('destination');
                    
                    if (!pickupInput || !destinationInput) return;
                    
                    if (!pickupInput.value) {
                        pickupInput.value = district;
                        showNotification(`ŸÖÿ®ÿØÿß ÿ®Ÿá "${district}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                    } else if (!destinationInput.value) {
                        destinationInput.value = district;
                        showNotification(`ŸÖŸÇÿµÿØ ÿ®Ÿá "${district}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                    } else {
                        // ÿß⁄Øÿ± Ÿáÿ± ÿØŸà Ÿæÿ± Ÿáÿ≥ÿ™ŸÜÿØÿå ÿßÿ≤ ⁄©ÿßÿ±ÿ®ÿ± ÿ®Ÿæÿ±ÿ≥€åŸÖ
                        if (confirm(`ÿ¢€åÿß ŸÖ€åÿÆŸàÿßŸá€åÿØ "${district}" ÿ±ÿß ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ŸÖŸÇÿµÿØ ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØÿü`)) {
                            destinationInput.value = district;
                            showNotification(`ŸÖŸÇÿµÿØ ÿ®Ÿá "${district}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                        }
                    }
                    calculateDistanceAndPrice();
                });
                
                districtsGrid.appendChild(districtItem);
            });
        }

        // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ≥€åÿ± ÿ®€åŸÜ ÿØŸà ŸÜŸÇÿ∑Ÿá
        function calculateRoute(startLocation, endLocation) {
            // ÿØÿ± ÿ≠ÿßŸÑÿ™ ŸàÿßŸÇÿπ€å ÿßÿ≤ API ŸÜŸÇÿ¥Ÿá ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÖ€åÿ¥ŸàÿØ
            // ÿß€åŸÜÿ¨ÿß €å⁄© ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿ≥ÿßÿØŸá ÿßŸÜÿ¨ÿßŸÖ ŸÖ€åÿØŸá€åŸÖ
            
            const startPoint = kabulLocations.find(loc => loc.name === startLocation);
            const endPoint = kabulLocations.find(loc => loc.name === endLocation);
            
            if (!startPoint || !endPoint) {
                // ÿß⁄Øÿ± ŸÜŸÇÿßÿ∑ ÿØŸÇ€åŸÇ Ÿæ€åÿØÿß ŸÜÿ¥ÿØŸÜÿØÿå ÿßÿ≤ ŸÜŸÇÿßÿ∑ ÿ™ÿµÿßÿØŸÅ€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÖ€å⁄©ŸÜ€åŸÖ
                return {
                    startX: Math.random() * 80 + 10,
                    startY: Math.random() * 80 + 10,
                    endX: Math.random() * 80 + 10,
                    endY: Math.random() * 80 + 10,
                    path: []
                };
            }
            
            // ÿß€åÿ¨ÿßÿØ ŸÖÿ≥€åÿ± ÿ≥ÿßÿØŸá ÿ®€åŸÜ ÿØŸà ŸÜŸÇÿ∑Ÿá
            const path = [];
            const steps = 20;
            
            for (let i = 0; i <= steps; i++) {
                const t = i / steps;
                const x = startPoint.x + (endPoint.x - startPoint.x) * t;
                const y = startPoint.y + (endPoint.y - startPoint.y) * t;
                path.push({ x, y });
            }
            
            return {
                startX: startPoint.x,
                startY: startPoint.y,
                endX: endPoint.x,
                endY: endPoint.y,
                path: path
            };
        }

        // ÿ±ÿ≥ŸÖ ŸÖÿ≥€åÿ± ÿ±Ÿà€å ŸÜŸÇÿ¥Ÿá
        function drawRoute(route) {
            clearRoute();
            
            const map = document.getElementById('kabulMap');
            if (!map) return;
            
            // ÿ±ÿ≥ŸÖ ÿÆÿ∑ ŸÖÿ≥€åÿ±
            for (let i = 0; i < route.path.length - 1; i++) {
                const point1 = route.path[i];
                const point2 = route.path[i + 1];
                
                const dx = point2.x - point1.x;
                const dy = point2.y - point1.y;
                const length = Math.sqrt(dx * dx + dy * dy);
                const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                
                const routeSegment = document.createElement('div');
                routeSegment.className = 'route-path';
                routeSegment.style.left = `${point1.x}%`;
                routeSegment.style.top = `${point1.y}%`;
                routeSegment.style.width = `${length}%`;
                routeSegment.style.transform = `rotate(${angle}deg)`;
                
                map.appendChild(routeSegment);
            }
            
            // ŸÜÿ¥ÿßŸÜ⁄Øÿ± ŸÖÿ®ÿØÿß
            const startMarker = document.createElement('div');
            startMarker.className = 'passenger-marker';
            startMarker.style.left = `${route.startX}%`;
            startMarker.style.top = `${route.startY}%`;
            startMarker.setAttribute('data-name', 'ŸÖÿ®ÿØÿß');
            map.appendChild(startMarker);
            
            // ŸÜÿ¥ÿßŸÜ⁄Øÿ± ŸÖŸÇÿµÿØ
            const endMarker = document.createElement('div');
            endMarker.className = 'location-marker';
            endMarker.style.left = `${route.endX}%`;
            endMarker.style.top = `${route.endY}%`;
            endMarker.setAttribute('data-name', 'ŸÖŸÇÿµÿØ');
            map.appendChild(endMarker);
            
            currentRoute = route;
        }

        // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸÖÿ≥€åÿ± ÿßÿ≤ ŸÜŸÇÿ¥Ÿá
        function clearRoute() {
            const map = document.getElementById('kabulMap');
            if (!map) return;
            
            const routeElements = map.querySelectorAll('.route-path, .passenger-marker');
            
            routeElements.forEach(element => {
                element.remove();
            });
            
            currentRoute = null;
        }

        // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿ≠ÿ±⁄©ÿ™ ÿÆŸàÿØÿ±Ÿà ÿ±Ÿà€å ŸÜŸÇÿ¥Ÿá
        function simulateCarMovement(route, isBike = false) {
            const map = document.getElementById('kabulMap');
            if (!map) return;
            
            // ÿ≠ÿ∞ŸÅ ÿÆŸàÿØÿ±Ÿà€å ŸÇÿ®ŸÑ€å ÿß⁄Øÿ± Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØ
            if (carMarker) {
                carMarker.remove();
            }
            
            // ÿß€åÿ¨ÿßÿØ ŸÜÿ¥ÿßŸÜ⁄Øÿ± ÿÆŸàÿØÿ±Ÿà
            carMarker = document.createElement('div');
            carMarker.className = isBike ? 'bike-marker' : 'car-marker';
            carMarker.style.left = `${route.path[0].x}%`;
            carMarker.style.top = `${route.path[0].y}%`;
            map.appendChild(carMarker);
            
            // ŸÖÿ™ŸàŸÇŸÅ ⁄©ÿ±ÿØŸÜ ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ŸÇÿ®ŸÑ€å
            if (carAnimationInterval) {
                clearInterval(carAnimationInterval);
            }
            
            // ÿ¥ÿ±Ÿàÿπ ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
            let currentStep = 0;
            const totalSteps = route.path.length;
            
            carAnimationInterval = setInterval(() => {
                if (currentStep >= totalSteps - 1) {
                    clearInterval(carAnimationInterval);
                    // ÿ±ÿ≥€åÿØŸÜ ÿ®Ÿá ŸÖŸÇÿµÿØ
                    showNotification('ÿ¥ŸÖÿß ÿ®Ÿá ŸÖŸÇÿµÿØ ÿ±ÿ≥€åÿØ€åÿØ!');
                    const liveTracking = document.getElementById('liveTracking');
                    if (liveTracking) liveTracking.style.display = 'none';
                    openRatingModal();
                    return;
                }
                
                const currentPoint = route.path[currentStep];
                const nextPoint = route.path[currentStep + 1];
                
                carMarker.style.left = `${nextPoint.x}%`;
                carMarker.style.top = `${nextPoint.y}%`;
                
                currentStep++;
                
                // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ±ÿØ€åÿßÿ®€å
                updateTrackingInfo(currentStep, totalSteps);
            }, 500);
        }

        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ±ÿØ€åÿßÿ®€å
        function updateTrackingInfo(currentStep, totalSteps) {
            const progress = (currentStep / totalSteps) * 100;
            const remainingTime = Math.round((totalSteps - currentStep) * 0.5); // Ÿáÿ± ŸÖÿ±ÿ≠ŸÑŸá 0.5 ÿ´ÿßŸÜ€åŸá
            
            const trackingETA = document.getElementById('trackingETA');
            const trackingDistance = document.getElementById('trackingDistance');
            
            if (trackingETA) trackingETA.textContent = `${remainingTime} ÿØŸÇ€åŸÇŸá`;
            if (trackingDistance) trackingDistance.textContent = `${(currentDistance * (1 - progress/100)).toFixed(1)} ⁄©€åŸÑŸàŸÖÿ™ÿ±`;
        }

        // ÿ¥ÿ±Ÿàÿπ ÿ±ÿØ€åÿßÿ®€å ÿ≥ŸÅÿ±
        function startTripTracking(driver, route) {
            const liveTracking = document.getElementById('liveTracking');
            if (liveTracking) liveTracking.style.display = 'block';
            
            const trackingDriverName = document.getElementById('trackingDriverName');
            const trackingETA = document.getElementById('trackingETA');
            const trackingDistance = document.getElementById('trackingDistance');
            
            if (trackingDriverName) trackingDriverName.textContent = driver.name;
            if (trackingETA) trackingETA.textContent = driver.eta;
            if (trackingDistance) trackingDistance.textContent = driver.distance;
            
            // ÿ±ÿ≥ŸÖ ŸÖÿ≥€åÿ±
            drawRoute(route);
            
            // ÿ¥ÿ±Ÿàÿπ ÿ≠ÿ±⁄©ÿ™ ÿÆŸàÿØÿ±Ÿà
            simulateCarMovement(route, selectedRideType === 'bike');
        }

        // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ≥ÿßŸÅÿ™ Ÿà ŸÇ€åŸÖÿ™
        function calculateDistanceAndPrice() {
            const pickupInput = document.getElementById('pickup');
            const destinationInput = document.getElementById('destination');
            const tripCalculator = document.getElementById('tripCalculator');
            
            if (!pickupInput || !destinationInput || !tripCalculator) return;
            
            const pickup = pickupInput.value;
            const destination = destinationInput.value;

            if (!pickup || !destination) {
                tripCalculator.classList.remove('active');
                return;
            }

            // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ≥ÿßŸÅÿ™ (ÿØÿ± ÿ≠ÿßŸÑÿ™ ŸàÿßŸÇÿπ€å ÿßÿ≤ API ŸÜŸÇÿ¥Ÿá ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÖ€åÿ¥ŸàÿØ)
            const randomDistance = (Math.random() * 15 + 2).toFixed(1); // ÿ®€åŸÜ €≤ ÿ™ÿß €±€∑ ⁄©€åŸÑŸàŸÖÿ™ÿ±
            currentDistance = parseFloat(randomDistance);

            // ŸÜŸÖÿß€åÿ¥ ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖÿ≥ÿßŸÅÿ™
            const distanceValue = document.getElementById('distanceValue');
            if (distanceValue) distanceValue.textContent = `${currentDistance} ⁄©€åŸÑŸàŸÖÿ™ÿ±`;
            
            tripCalculator.classList.add('active');

            // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÇ€åŸÖÿ™
            updatePrice();
        }

        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÇ€åŸÖÿ™
        function updatePrice() {
            if (currentDistance === 0) return;

            const selectedRide = document.querySelector('.ride-type.selected');
            if (!selectedRide) return;
            
            const baseFare = parseInt(selectedRide.dataset.baseFare);
            const distanceFare = Math.round(currentDistance * 5); // €µ ÿßŸÅÿ∫ÿßŸÜ€å per kilometer
            const totalFare = baseFare + distanceFare;

            currentPrice = totalFare;

            // ŸÜŸÖÿß€åÿ¥ ÿ¨ÿ≤ÿ¶€åÿßÿ™ ŸÇ€åŸÖÿ™
            const baseFareValue = document.getElementById('baseFareValue');
            const distanceFareValue = document.getElementById('distanceFareValue');
            const totalFareValue = document.getElementById('totalFareValue');
            
            if (baseFareValue) baseFareValue.textContent = `${baseFare} ÿßŸÅÿ∫ÿßŸÜ€å`;
            if (distanceFareValue) distanceFareValue.textContent = `${distanceFare} ÿßŸÅÿ∫ÿßŸÜ€å`;
            if (totalFareValue) totalFareValue.textContent = `${totalFare} ÿßŸÅÿ∫ÿßŸÜ€å`;

            // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÇ€åŸÖÿ™ ÿØÿ± ⁄©ÿßÿ±ÿ™Ÿáÿß
            const economyPrice = document.getElementById('economyPrice');
            const comfortPrice = document.getElementById('comfortPrice');
            const bikePrice = document.getElementById('bikePrice');
            
            if (economyPrice) economyPrice.textContent = `${calculateRidePrice('economy')} ÿßŸÅÿ∫ÿßŸÜ€å`;
            if (comfortPrice) comfortPrice.textContent = `${calculateRidePrice('comfort')} ÿßŸÅÿ∫ÿßŸÜ€å`;
            if (bikePrice) bikePrice.textContent = `${calculateRidePrice('bike')} ÿßŸÅÿ∫ÿßŸÜ€å`;
        }

        // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÇ€åŸÖÿ™ ÿ®ÿ±ÿß€å Ÿáÿ± ŸÜŸàÿπ ÿ≥ŸÅÿ±
        function calculateRidePrice(type) {
            const baseFares = {
                economy: 50,
                comfort: 80,
                bike: 30
            };
            
            return baseFares[type] + Math.round(currentDistance * 5);
        }

        // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÅÿ±ŸÖ ÿ´ÿ®ÿ™ŸÜÿßŸÖ
        function validateRegisterForm() {
            let isValid = true;
            clearErrors();
            
            const name = document.getElementById('registerName')?.value.trim();
            const email = document.getElementById('registerEmail')?.value.trim();
            const phone = document.getElementById('registerPhone')?.value.trim();
            const password = document.getElementById('registerPassword')?.value;
            const confirmPassword = document.getElementById('registerConfirmPassword')?.value;
            const userType = document.getElementById('userType')?.value;
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÜÿßŸÖ
            if (!name || name.length < 2) {
                showError('registerName', 'ŸÜÿßŸÖ ÿ®ÿß€åÿØ ÿ≠ÿØÿßŸÇŸÑ €≤ ÿ≠ÿ±ŸÅ ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥ÿØ');
                isValid = false;
            }
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ÿß€åŸÖ€åŸÑ
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                showError('registerEmail', 'ŸÑÿ∑ŸÅÿßŸã €å⁄© ÿß€åŸÖ€åŸÑ ŸÖÿπÿ™ÿ®ÿ± Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
                isValid = false;
            }
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥
            const phoneRegex = /^(\+93|0)?[0-9]{9}$/;
            if (!phone || !phoneRegex.test(phone)) {
                showError('registerPhone', 'ŸÑÿ∑ŸÅÿßŸã €å⁄© ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ŸÖÿπÿ™ÿ®ÿ± Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
                isValid = false;
            }
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            if (!password || password.length < 6) {
                showError('registerPassword', 'ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿ®ÿß€åÿØ ÿ≠ÿØÿßŸÇŸÑ €∂ ÿ≠ÿ±ŸÅ ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥ÿØ');
                isValid = false;
            }
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ÿ™⁄©ÿ±ÿßÿ± ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            if (password !== confirmPassword) {
                showError('registerConfirmPassword', 'ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± Ÿà ÿ™⁄©ÿ±ÿßÿ± ÿ¢ŸÜ ŸÖÿ∑ÿßÿ®ŸÇÿ™ ŸÜÿØÿßÿ±ŸÜÿØ');
                isValid = false;
            }
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÜŸàÿπ ⁄©ÿßÿ±ÿ®ÿ±
            if (!userType) {
                showError('userType', 'ŸÑÿ∑ŸÅÿßŸã ŸÜŸàÿπ ⁄©ÿßÿ±ÿ®ÿ± ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
                isValid = false;
            }
            
            return isValid;
        }

        // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÅÿ±ŸÖ Ÿàÿ±ŸàÿØ
        function validateLoginForm() {
            let isValid = true;
            clearErrors();
            
            const email = document.getElementById('loginEmail')?.value.trim();
            const password = document.getElementById('loginPassword')?.value;
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ÿß€åŸÖ€åŸÑ/ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥
            if (!email) {
                showError('loginEmail', 'ŸÑÿ∑ŸÅÿßŸã ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
                isValid = false;
            }
            
            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            if (!password) {
                showError('loginPassword', 'ŸÑÿ∑ŸÅÿßŸã ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
                isValid = false;
            }
            
            return isValid;
        }

        // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÅÿ±ŸÖ ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
        function validateForgotPasswordForm() {
            let isValid = true;
            clearErrors();
            
            const email = document.getElementById('forgotPasswordEmail')?.value.trim();
            
            if (!email) {
                showError('forgotPasswordEmail', 'ŸÑÿ∑ŸÅÿßŸã ÿß€åŸÖ€åŸÑ €åÿß ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
                isValid = false;
            }
            
            return isValid;
        }

        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å UI Ÿæÿ≥ ÿßÿ≤ Ÿàÿ±ŸàÿØ
        function updateUIAfterLogin() {
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
            const userProfile = document.getElementById('userProfile');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            
            if (loginBtn) loginBtn.style.display = 'none';
            if (logoutBtn) logoutBtn.style.display = 'block';
            if (mobileLoginBtn) mobileLoginBtn.style.display = 'none';
            if (mobileLogoutBtn) mobileLogoutBtn.style.display = 'block';
            if (userProfile) userProfile.style.display = 'flex';
            
            // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ⁄©ÿßÿ±ÿ®ÿ±
            if (userAvatar && currentUser && currentUser.name) {
                userAvatar.textContent = currentUser.name.charAt(0);
            }
            if (userName && currentUser && currentUser.name) {
                userName.textContent = currentUser.name;
            }
            
            // ŸÜŸÖÿß€åÿ¥ ŸÑ€åŸÜ⁄© ÿßÿØŸÖ€åŸÜ ÿß⁄Øÿ± ⁄©ÿßÿ±ÿ®ÿ± ÿßÿØŸÖ€åŸÜ ÿ®ÿßÿ¥ÿØ
            if (isAdmin) {
                const adminLink = document.getElementById('adminLink');
                const mobileAdminLink = document.getElementById('mobileAdminLink');
                if (adminLink) adminLink.style.display = 'block';
                if (mobileAdminLink) mobileAdminLink.style.display = 'block';
            }
            
            // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å Ÿæÿ±ŸàŸÅÿß€åŸÑ
            updateProfilePage();
        }

        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å UI Ÿæÿ≥ ÿßÿ≤ ÿÆÿ±Ÿàÿ¨
        function updateUIAfterLogout() {
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
            const userProfile = document.getElementById('userProfile');
            
            if (loginBtn) loginBtn.style.display = 'block';
            if (logoutBtn) logoutBtn.style.display = 'none';
            if (mobileLoginBtn) mobileLoginBtn.style.display = 'block';
            if (mobileLogoutBtn) mobileLogoutBtn.style.display = 'none';
            if (userProfile) userProfile.style.display = 'none';
            
            // ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ ŸÑ€åŸÜ⁄© ÿßÿØŸÖ€åŸÜ
            const adminLink = document.getElementById('adminLink');
            const mobileAdminLink = document.getElementById('mobileAdminLink');
            if (adminLink) adminLink.style.display = 'none';
            if (mobileAdminLink) mobileAdminLink.style.display = 'none';
            
            // ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            const homePage = document.getElementById('home-page');
            if (homePage) homePage.classList.add('active');
        }

        // ŸÖÿØ€åÿ±€åÿ™ ÿÆÿ±Ÿàÿ¨
        function logout() {
            currentUser = null;
            isAdmin = false;
            localStorage.removeItem('snapp_current_user');
            showNotification('ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿÆÿßÿ±ÿ¨ ÿ¥ÿØ€åÿØ');
            updateUIAfterLogout();
        }

        // ÿ®ÿ±ÿ±ÿ≥€å Ÿàÿ∂ÿπ€åÿ™ Ÿàÿ±ŸàÿØ ⁄©ÿßÿ±ÿ®ÿ± ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿµŸÅÿ≠Ÿá
        function checkUserLoginStatus() {
            // ÿß€åÿ¨ÿßÿØ ⁄©ÿßÿ±ÿ®ÿ± ÿßÿØŸÖ€åŸÜ Ÿæ€åÿ¥ŸÅÿ±ÿ∂ ÿß⁄Øÿ± Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥ÿØ
            const users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            const adminUser = users.find(u => u.role === 'admin');
            
            if (!adminUser) {
                users.push({
                    id: 1,
                    name: 'ŸÖÿØ€åÿ± ÿ≥€åÿ≥ÿ™ŸÖ',
                    email: 'admin@snapp.af',
                    phone: '0700123456',
                    password: 'admin123',
                    role: 'admin',
                    status: 'approved',
                    created_at: new Date().toISOString()
                });
                localStorage.setItem('snapp_users', JSON.stringify(users));
            }
            
            // ÿ®ÿ±ÿ±ÿ≥€å ÿß⁄Øÿ± ⁄©ÿßÿ±ÿ®ÿ± ŸÇÿ®ŸÑÿßŸã Ÿàÿßÿ±ÿØ ÿ¥ÿØŸá ÿßÿ≥ÿ™
            const savedUser = localStorage.getItem('snapp_current_user');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    // ÿ®ÿ±ÿ±ÿ≥€å ÿ≥ÿßÿÆÿ™ÿßÿ± ⁄©ÿßÿ±ÿ®ÿ±
                    if (currentUser && currentUser.id && currentUser.name) {
                        isAdmin = currentUser.role === 'admin';
                        updateUIAfterLogin();
                    } else {
                        // ÿß⁄Øÿ± ÿØÿßÿØŸáŸáÿß ŸÜÿßŸÖÿπÿ™ÿ®ÿ± Ÿáÿ≥ÿ™ŸÜÿØÿå ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØ
                        localStorage.removeItem('snapp_current_user');
                        currentUser = null;
                    }
                } catch (error) {
                    console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ⁄©ÿßÿ±ÿ®ÿ±:', error);
                    localStorage.removeItem('snapp_current_user');
                    currentUser = null;
                }
            }
        }

        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿµŸÅÿ≠Ÿá Ÿæÿ±ŸàŸÅÿß€åŸÑ
        function updateProfilePage() {
            if (!currentUser) return;
            
            const profileAvatar = document.getElementById('profileAvatar');
            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');
            const profilePhone = document.getElementById('profilePhone');
            const editName = document.getElementById('editName');
            const editEmail = document.getElementById('editEmail');
            const editPhone = document.getElementById('editPhone');
            
            if (profileAvatar && currentUser.name) profileAvatar.textContent = currentUser.name.charAt(0);
            if (profileName) profileName.textContent = currentUser.name || '⁄©ÿßÿ±ÿ®ÿ±';
            if (profileEmail) profileEmail.textContent = currentUser.email || '---';
            if (profilePhone) profilePhone.textContent = currentUser.phone || '---';
            
            if (editName) editName.value = currentUser.name || '';
            if (editEmail) editEmail.value = currentUser.email || '';
            if (editPhone) editPhone.value = currentUser.phone || '';
            
            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿ¢ŸÖÿßÿ± ⁄©ÿßÿ±ÿ®ÿ±
            const trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]')
                .filter(trip => trip.user_id === currentUser.id);
            
            const totalTrips = trips.length;
            const totalSpent = trips.reduce((sum, trip) => sum + (trip.price || 0), 0);
            const userRating = currentUser.rating || 4.7;
            
            const totalTripsCount = document.getElementById('totalTripsCount');
            const totalSpentElement = document.getElementById('totalSpent');
            const userRatingElement = document.getElementById('userRating');
            
            if (totalTripsCount) totalTripsCount.textContent = totalTrips;
            if (totalSpentElement) totalSpentElement.textContent = totalSpent;
            if (userRatingElement) userRatingElement.textContent = userRating;
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ≥ŸÅÿ±Ÿáÿß€å ŸÖŸÜ
        function loadMyTrips() {
            const myTripsTable = document.getElementById('myTripsTable');
            if (!myTripsTable) return;
            
            myTripsTable.innerHTML = '';
            
            let trips = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]')
                .filter(trip => trip.user_id === currentUser?.id)
                .reverse();
            
            if (trips.length === 0) {
                myTripsTable.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px;">Ÿá€å⁄Ü ÿ≥ŸÅÿ±€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ</td></tr>';
                return;
            }
            
            trips.forEach(trip => {
                const row = document.createElement('tr');
                const date = new Date(trip.created_at).toLocaleDateString('fa-IR');
                const statusClass = `status-${trip.status}`;
                const statusText = {
                    'requested': 'ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ¥ÿØŸá',
                    'confirmed': 'ÿ™ÿ£€å€åÿØ ÿ¥ÿØŸá',
                    'completed': 'ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá',
                    'cancelled': 'ŸÑÿ∫Ÿà ÿ¥ÿØŸá'
                }[trip.status] || trip.status;
                
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${trip.pickup}</td>
                    <td>${trip.destination}</td>
                    <td>${trip.ride_type === 'economy' ? 'ÿßŸÇÿ™ÿµÿßÿØ€å' : trip.ride_type === 'comfort' ? '⁄©ŸÑÿßÿ≥€å⁄©' : 'ŸÖŸàÿ™Ÿàÿ±'}</td>
                    <td>${trip.distance} ⁄©€åŸÑŸàŸÖÿ™ÿ±</td>
                    <td>${trip.price} ÿßŸÅÿ∫ÿßŸÜ€å</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        ${trip.status === 'requested' || trip.status === 'confirmed' ? 
                          `<button class="action-btn btn-reject" data-id="${trip.id}">ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±</button>` : ''}
                        ${trip.status === 'completed' && !trip.rated ? 
                          `<button class="action-btn btn-approve" data-id="${trip.id}">ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å</button>` : ''}
                    </td>
                `;
                
                myTripsTable.appendChild(row);
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸá ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±
            document.querySelectorAll('#myTripsTable .btn-reject').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tripId = btn.getAttribute('data-id');
                    if (confirm('ÿ¢€åÿß ÿßÿ≤ ŸÑÿ∫Ÿà ÿß€åŸÜ ÿ≥ŸÅÿ± ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                        updateTripStatus(tripId, 'cancelled');
                        showNotification('ÿ≥ŸÅÿ± ŸÑÿ∫Ÿà ÿ¥ÿØ');
                        loadMyTrips();
                    }
                });
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸá ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å
            document.querySelectorAll('#myTripsTable .btn-approve').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tripId = btn.getAttribute('data-id');
                    openRatingModal(tripId);
                });
            });
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ™ÿÆŸÅ€åŸÅŸáÿß
        function loadDiscounts() {
            const discountsList = document.getElementById('discountsList');
            if (!discountsList) return;
            
            discountsList.innerHTML = '';
            
            let discounts = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            discounts = JSON.parse(localStorage.getItem('snapp_discounts') || '[]')
                .filter(discount => new Date(discount.expiry_date) > new Date())
                .reverse();
            
            if (discounts.length === 0) {
                discountsList.innerHTML = '<p style="text-align: center; padding: 20px;">Ÿá€å⁄Ü ÿ™ÿÆŸÅ€åŸÅ ŸÅÿπÿßŸÑ€å ŸÖŸàÿ¨ŸàÿØ ŸÜ€åÿ≥ÿ™</p>';
                return;
            }
            
            discounts.forEach(discount => {
                const discountElement = document.createElement('div');
                discountElement.className = 'discount-card';
                
                const expiryDate = new Date(discount.expiry_date).toLocaleDateString('fa-IR');
                
                discountElement.innerHTML = `
                    <div class="discount-header">
                        <div class="discount-code">${discount.code}</div>
                        <div class="discount-percent">${discount.percent}% ÿ™ÿÆŸÅ€åŸÅ</div>
                    </div>
                    <div class="discount-details">
                        <div>ŸÖŸÜŸÇÿ∂€å: ${expiryDate}</div>
                        <div>ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ÿØŸá: ${discount.used_count || 0} ÿßÿ≤ ${discount.max_uses}</div>
                    </div>
                `;
                
                discountsList.appendChild(discountElement);
            });
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ™€å⁄©ÿ™Ÿáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å
        function loadSupportTickets() {
            const supportTickets = document.getElementById('supportTickets');
            if (!supportTickets) return;
            
            supportTickets.innerHTML = '';
            
            if (!currentUser) return;
            
            let tickets = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            tickets = JSON.parse(localStorage.getItem('snapp_support') || '[]')
                .filter(ticket => ticket.user_id === currentUser.id)
                .reverse();
            
            if (tickets.length === 0) {
                supportTickets.innerHTML = '<p style="text-align: center; padding: 20px;">Ÿá€å⁄Ü ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™</p>';
                return;
            }
            
            tickets.forEach(ticket => {
                const ticketElement = document.createElement('div');
                ticketElement.className = 'ticket';
                ticketElement.style.cssText = 'background: var(--light); padding: 15px; border-radius: 8px; margin-bottom: 15px;';
                
                const date = new Date(ticket.created_at).toLocaleDateString('fa-IR');
                const statusClass = `status-${ticket.status}`;
                const statusText = {
                    'pending': 'ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± Ÿæÿßÿ≥ÿÆ',
                    'answered': 'Ÿæÿßÿ≥ÿÆ ÿØÿßÿØŸá ÿ¥ÿØŸá',
                    'closed': 'ÿ®ÿ≥ÿ™Ÿá ÿ¥ÿØŸá'
                }[ticket.status] || ticket.status;
                
                ticketElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div style="font-weight: bold;">${ticket.subject}</div>
                        <div style="color: var(--gray); font-size: 14px;">${date}</div>
                    </div>
                    <div style="color: var(--dark);">${ticket.message}</div>
                    ${ticket.reply ? `<div style="margin-top: 10px; padding: 10px; background: #e9f7ef; border-radius: 5px;">
                        <strong>Ÿæÿßÿ≥ÿÆ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å:</strong><br>${ticket.reply}
                    </div>` : ''}
                    <div style="margin-top: 10px;">
                        <span class="status-badge ${statusClass}">${statusText}</span>
                    </div>
                `;
                
                supportTickets.appendChild(ticketElement);
            });
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™
        function loadAdminPanel() {
            if (!isAdmin) {
                showNotification('ÿ¥ŸÖÿß ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ ŸÜÿØÿßÿ±€åÿØ', 'error');
                const homePage = document.getElementById('home-page');
                const adminPage = document.getElementById('admin-page');
                if (homePage) homePage.classList.add('active');
                if (adminPage) adminPage.classList.remove('active');
                return;
            }
            
            loadAdminStats();
            loadPendingUsers();
            loadAllUsers();
            loadDrivers();
            loadAdminTrips();
            loadAdminDiscounts();
            loadAdminSupport();
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ¢ŸÖÿßÿ± ŸÖÿØ€åÿ±€åÿ™
        function loadAdminStats() {
            const users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            const trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]');
            
            const totalTrips = document.getElementById('totalTrips');
            const activeUsers = document.getElementById('activeUsers');
            const totalDrivers = document.getElementById('totalDrivers');
            const totalRevenue = document.getElementById('totalRevenue');
            
            if (totalTrips) totalTrips.textContent = trips.length;
            if (activeUsers) activeUsers.textContent = users.filter(u => u.status === 'approved').length;
            if (totalDrivers) totalDrivers.textContent = users.filter(u => u.role === 'driver' && u.status === 'approved').length;
            
            const totalRevenueValue = trips.reduce((sum, trip) => sum + (trip.price || 0), 0);
            if (totalRevenue) totalRevenue.textContent = `${totalRevenueValue} ÿßŸÅÿ∫ÿßŸÜ€å`;
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿß€å€åÿØ
        function loadPendingUsers() {
            const pendingUsersTable = document.getElementById('pendingUsersTable');
            if (!pendingUsersTable) return;
            
            pendingUsersTable.innerHTML = '';
            
            let users = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            users = JSON.parse(localStorage.getItem('snapp_users') || '[]')
                .filter(user => user.status === 'pending');
            
            if (users.length === 0) {
                pendingUsersTable.innerHTML = '<tr><td colspan="6" style="text-align: center;">Ÿá€å⁄Ü ⁄©ÿßÿ±ÿ®ÿ±€å ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿß€å€åÿØ ŸÜ€åÿ≥ÿ™</td></tr>';
                return;
            }
            
            users.forEach(user => {
                const row = document.createElement('tr');
                const date = new Date(user.created_at).toLocaleDateString('fa-IR');
                const roleText = user.role === 'passenger' ? 'ŸÖÿ≥ÿßŸÅÿ±' : 'ÿ±ÿßŸÜŸÜÿØŸá';
                
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone}</td>
                    <td>${roleText}</td>
                    <td>${date}</td>
                    <td class="action-buttons">
                        <button class="action-btn btn-approve" data-id="${user.id}">ÿ™ÿß€å€åÿØ</button>
                        <button class="action-btn btn-reject" data-id="${user.id}">ÿ±ÿØ</button>
                    </td>
                `;
                
                pendingUsersTable.appendChild(row);
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸáŸáÿß
            document.querySelectorAll('.btn-approve').forEach(btn => {
                btn.addEventListener('click', () => approveUser(btn.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.btn-reject').forEach(btn => {
                btn.addEventListener('click', () => rejectUser(btn.getAttribute('data-id')));
            });
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸáŸÖŸá ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ
        function loadAllUsers() {
            const allUsersTable = document.getElementById('allUsersTable');
            if (!allUsersTable) return;
            
            allUsersTable.innerHTML = '';
            
            let users = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            
            if (users.length === 0) {
                allUsersTable.innerHTML = '<tr><td colspan="7" style="text-align: center;">Ÿá€å⁄Ü ⁄©ÿßÿ±ÿ®ÿ±€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™</td></tr>';
                return;
            }
            
            users.forEach(user => {
                const row = document.createElement('tr');
                const date = new Date(user.created_at).toLocaleDateString('fa-IR');
                const roleText = user.role === 'passenger' ? 'ŸÖÿ≥ÿßŸÅÿ±' : 'ÿ±ÿßŸÜŸÜÿØŸá';
                const statusClass = `status-${user.status}`;
                const statusText = {
                    'pending': 'ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿß€å€åÿØ',
                    'approved': 'ÿ™ÿß€å€åÿØ ÿ¥ÿØŸá',
                    'rejected': 'ÿ±ÿØ ÿ¥ÿØŸá'
                }[user.status] || user.status;
                
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone}</td>
                    <td>${roleText}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>${date}</td>
                    <td class="action-buttons">
                        ${user.status === 'approved' ? 
                          `<button class="action-btn btn-reject" data-id="${user.id}">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</button>` : 
                          user.status === 'rejected' ? 
                          `<button class="action-btn btn-approve" data-id="${user.id}">ŸÅÿπÿßŸÑ</button>` : ''}
                        <button class="action-btn btn-reject" data-id="${user.id}">ÿ≠ÿ∞ŸÅ</button>
                    </td>
                `;
                
                allUsersTable.appendChild(row);
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸáŸáÿß
            document.querySelectorAll('#allUsersTable .btn-approve').forEach(btn => {
                btn.addEventListener('click', () => approveUser(btn.getAttribute('data-id')));
            });
            
            document.querySelectorAll('#allUsersTable .btn-reject').forEach(btn => {
                btn.addEventListener('click', () => {
                    const userId = btn.getAttribute('data-id');
                    const user = users.find(u => u.id == userId);
                    
                    if (user.status === 'approved') {
                        // ÿ∫€åÿ±ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ⁄©ÿßÿ±ÿ®ÿ±
                        if (confirm('ÿ¢€åÿß ÿßÿ≤ ÿ∫€åÿ±ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ÿß€åŸÜ ⁄©ÿßÿ±ÿ®ÿ± ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                            deactivateUser(userId);
                        }
                    } else {
                        // ÿ≠ÿ∞ŸÅ ⁄©ÿßÿ±ÿ®ÿ±
                        if (confirm('ÿ¢€åÿß ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿß€åŸÜ ⁄©ÿßÿ±ÿ®ÿ± ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                            deleteUser(userId);
                        }
                    }
                });
            });
        }

        // ÿ™ÿß€å€åÿØ ⁄©ÿßÿ±ÿ®ÿ±
        function approveUser(userId) {
            let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            users = users.map(user => {
                if (user.id == userId) {
                    return {...user, status: 'approved'};
                }
                return user;
            });
            
            localStorage.setItem('snapp_users', JSON.stringify(users));
            showNotification('⁄©ÿßÿ±ÿ®ÿ± ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ™ÿß€å€åÿØ ÿ¥ÿØ');
            loadPendingUsers();
            loadAllUsers();
            loadAdminStats();
        }

        // ÿ±ÿØ ⁄©ÿßÿ±ÿ®ÿ±
        function rejectUser(userId) {
            let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            users = users.map(user => {
                if (user.id == userId) {
                    return {...user, status: 'rejected'};
                }
                return user;
            });
            
            localStorage.setItem('snapp_users', JSON.stringify(users));
            showNotification('⁄©ÿßÿ±ÿ®ÿ± ÿ±ÿØ ÿ¥ÿØ');
            loadPendingUsers();
            loadAllUsers();
        }

        // ÿ∫€åÿ±ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ⁄©ÿßÿ±ÿ®ÿ±
        function deactivateUser(userId) {
            let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            users = users.map(user => {
                if (user.id == userId) {
                    return {...user, status: 'rejected'};
                }
                return user;
            });
            
            localStorage.setItem('snapp_users', JSON.stringify(users));
            showNotification('⁄©ÿßÿ±ÿ®ÿ± ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ');
            loadAllUsers();
            loadAdminStats();
        }

        // ÿ≠ÿ∞ŸÅ ⁄©ÿßÿ±ÿ®ÿ±
        function deleteUser(userId) {
            let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            users = users.filter(user => user.id != userId);
            
            localStorage.setItem('snapp_users', JSON.stringify(users));
            showNotification('⁄©ÿßÿ±ÿ®ÿ± ÿ≠ÿ∞ŸÅ ÿ¥ÿØ');
            loadAllUsers();
            loadAdminStats();
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ
        function loadDrivers() {
            const driversTable = document.getElementById('driversTable');
            if (!driversTable) return;
            
            driversTable.innerHTML = '';
            
            let drivers = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            drivers = JSON.parse(localStorage.getItem('snapp_users') || '[]')
                .filter(user => user.role === 'driver' && user.status === 'approved');
            
            if (drivers.length === 0) {
                driversTable.innerHTML = '<tr><td colspan="7" style="text-align: center;">Ÿá€å⁄Ü ÿ±ÿßŸÜŸÜÿØŸáÿß€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™</td></tr>';
                return;
            }
            
            drivers.forEach(driver => {
                const row = document.createElement('tr');
                const vehicleType = driver.vehicle_type || 'car';
                const vehicleTypeText = vehicleType === 'car' ? 'ÿÆŸàÿØÿ±Ÿà' : 'ŸÖŸàÿ™Ÿàÿ±';
                const carModel = driver.car_model || '---';
                const plateNumber = driver.plate_number || '---';
                const statusClass = driver.driver_status === 'active' ? 'status-active' : 'status-inactive';
                const statusText = driver.driver_status === 'active' ? 'ŸÅÿπÿßŸÑ' : 'ÿ∫€åÿ±ŸÅÿπÿßŸÑ';
                
                row.innerHTML = `
                    <td>${driver.name}</td>
                    <td>${driver.phone}</td>
                    <td>${vehicleTypeText}</td>
                    <td>${carModel}</td>
                    <td>${plateNumber}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        <button class="action-btn ${driver.driver_status === 'active' ? 'btn-reject' : 'btn-approve'}" data-id="${driver.id}">
                            ${driver.driver_status === 'active' ? 'ÿ∫€åÿ±ŸÅÿπÿßŸÑ' : 'ŸÅÿπÿßŸÑ'}
                        </button>
                        <button class="action-btn btn-reject" data-id="${driver.id}">ÿ≠ÿ∞ŸÅ</button>
                    </td>
                `;
                
                driversTable.appendChild(row);
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸáŸáÿß
            document.querySelectorAll('#driversTable .btn-approve, #driversTable .btn-reject').forEach(btn => {
                btn.addEventListener('click', () => {
                    const driverId = btn.getAttribute('data-id');
                    if (btn.classList.contains('btn-approve')) {
                        // ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá
                        toggleDriverStatus(driverId, 'active');
                    } else if (btn.classList.contains('btn-reject') && btn.textContent !== 'ÿ≠ÿ∞ŸÅ') {
                        // ÿ∫€åÿ±ŸÅÿπÿßŸÑ ⁄©ÿ±ÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá
                        toggleDriverStatus(driverId, 'inactive');
                    } else {
                        // ÿ≠ÿ∞ŸÅ ÿ±ÿßŸÜŸÜÿØŸá
                        if (confirm('ÿ¢€åÿß ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿß€åŸÜ ÿ±ÿßŸÜŸÜÿØŸá ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                            deleteDriver(driverId);
                        }
                    }
                });
            });
        }

        // ÿ™ÿ∫€å€åÿ± Ÿàÿ∂ÿπ€åÿ™ ÿ±ÿßŸÜŸÜÿØŸá
        function toggleDriverStatus(driverId, status) {
            let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            users = users.map(user => {
                if (user.id == driverId) {
                    return {...user, driver_status: status};
                }
                return user;
            });
            
            localStorage.setItem('snapp_users', JSON.stringify(users));
            showNotification('Ÿàÿ∂ÿπ€åÿ™ ÿ±ÿßŸÜŸÜÿØŸá ÿ™ÿ∫€å€åÿ± ⁄©ÿ±ÿØ');
            loadDrivers();
        }

        // ÿ≠ÿ∞ŸÅ ÿ±ÿßŸÜŸÜÿØŸá
        function deleteDriver(driverId) {
            let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            users = users.filter(user => user.id != driverId);
            
            localStorage.setItem('snapp_users', JSON.stringify(users));
            showNotification('ÿ±ÿßŸÜŸÜÿØŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ');
            loadDrivers();
            loadAdminStats();
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ≥ŸÅÿ±Ÿáÿß ÿ®ÿ±ÿß€å ÿßÿØŸÖ€åŸÜ
        function loadAdminTrips() {
            const adminTripsTable = document.getElementById('adminTripsTable');
            if (!adminTripsTable) return;
            
            adminTripsTable.innerHTML = '';
            
            let trips = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]').reverse();
            
            if (trips.length === 0) {
                adminTripsTable.innerHTML = '<tr><td colspan="7" style="text-align: center;">Ÿá€å⁄Ü ÿ≥ŸÅÿ±€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™</td></tr>';
                return;
            }
            
            trips.forEach(trip => {
                const row = document.createElement('tr');
                const date = new Date(trip.created_at).toLocaleDateString('fa-IR');
                const statusClass = `status-${trip.status}`;
                const statusText = {
                    'requested': 'ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ¥ÿØŸá',
                    'confirmed': 'ÿ™ÿ£€å€åÿØ ÿ¥ÿØŸá',
                    'completed': 'ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá',
                    'cancelled': 'ŸÑÿ∫Ÿà ÿ¥ÿØŸá'
                }[trip.status] || trip.status;
                
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${trip.user_name || '---'}</td>
                    <td>${trip.pickup}</td>
                    <td>${trip.destination}</td>
                    <td>${trip.price} ÿßŸÅÿ∫ÿßŸÜ€å</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        ${trip.status === 'requested' || trip.status === 'confirmed' ? 
                          `<button class="action-btn btn-reject" data-id="${trip.id}">ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±</button>` : ''}
                        <button class="action-btn btn-reject" data-id="${trip.id}">ÿ≠ÿ∞ŸÅ</button>
                    </td>
                `;
                
                adminTripsTable.appendChild(row);
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸáŸáÿß
            document.querySelectorAll('#adminTripsTable .btn-reject').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tripId = btn.getAttribute('data-id');
                    if (btn.textContent === 'ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±') {
                        if (confirm('ÿ¢€åÿß ÿßÿ≤ ŸÑÿ∫Ÿà ÿß€åŸÜ ÿ≥ŸÅÿ± ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                            updateTripStatus(tripId, 'cancelled');
                            showNotification('ÿ≥ŸÅÿ± ŸÑÿ∫Ÿà ÿ¥ÿØ');
                            loadAdminTrips();
                        }
                    } else {
                        if (confirm('ÿ¢€åÿß ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿß€åŸÜ ÿ≥ŸÅÿ± ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                            deleteTrip(tripId);
                        }
                    }
                });
            });
        }

        // ÿ≠ÿ∞ŸÅ ÿ≥ŸÅÿ±
        function deleteTrip(tripId) {
            let trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]');
            trips = trips.filter(trip => trip.id != tripId);
            
            localStorage.setItem('snapp_trips', JSON.stringify(trips));
            showNotification('ÿ≥ŸÅÿ± ÿ≠ÿ∞ŸÅ ÿ¥ÿØ');
            loadAdminTrips();
            loadAdminStats();
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ™ÿÆŸÅ€åŸÅŸáÿß ÿ®ÿ±ÿß€å ÿßÿØŸÖ€åŸÜ
        function loadAdminDiscounts() {
            const discountsTable = document.getElementById('discountsTable');
            if (!discountsTable) return;
            
            discountsTable.innerHTML = '';
            
            let discounts = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            discounts = JSON.parse(localStorage.getItem('snapp_discounts') || '[]').reverse();
            
            if (discounts.length === 0) {
                discountsTable.innerHTML = '<tr><td colspan="6" style="text-align: center;">Ÿá€å⁄Ü ÿ™ÿÆŸÅ€åŸÅ€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™</td></tr>';
                return;
            }
            
            discounts.forEach(discount => {
                const row = document.createElement('tr');
                const expiryDate = new Date(discount.expiry_date).toLocaleDateString('fa-IR');
                const statusClass = new Date(discount.expiry_date) > new Date() ? 'status-active' : 'status-inactive';
                const statusText = new Date(discount.expiry_date) > new Date() ? 'ŸÅÿπÿßŸÑ' : 'ŸÖŸÜŸÇÿ∂€å';
                
                row.innerHTML = `
                    <td>${discount.code}</td>
                    <td>${discount.percent}%</td>
                    <td>${expiryDate}</td>
                    <td>${discount.used_count || 0} / ${discount.max_uses}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        <button class="action-btn btn-reject" data-id="${discount.id}">ÿ≠ÿ∞ŸÅ</button>
                    </td>
                `;
                
                discountsTable.appendChild(row);
            });
            
            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ event listener ÿ®ÿ±ÿß€å ÿØ⁄©ŸÖŸáŸáÿß
            document.querySelectorAll('#discountsTable .btn-reject').forEach(btn => {
                btn.addEventListener('click', () => {
                    const discountId = btn.getAttribute('data-id');
                    if (confirm('ÿ¢€åÿß ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿß€åŸÜ ÿ™ÿÆŸÅ€åŸÅ ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                        deleteDiscount(discountId);
                    }
                });
            });
        }

        // ÿ≠ÿ∞ŸÅ ÿ™ÿÆŸÅ€åŸÅ
        function deleteDiscount(discountId) {
            let discounts = JSON.parse(localStorage.getItem('snapp_discounts') || '[]');
            discounts = discounts.filter(discount => discount.id != discountId);
            
            localStorage.setItem('snapp_discounts', JSON.stringify(discounts));
            showNotification('ÿ™ÿÆŸÅ€åŸÅ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ');
            loadAdminDiscounts();
        }

        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™Ÿáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ®ÿ±ÿß€å ÿßÿØŸÖ€åŸÜ
        function loadAdminSupport() {
            const adminSupportTable = document.getElementById('adminSupportTable');
            if (!adminSupportTable) return;
            
            adminSupportTable.innerHTML = '';
            
            let tickets = [];
            
            // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ≤ localStorage
            tickets = JSON.parse(localStorage.getItem('snapp_support') || '[]').reverse();
            
            if (tickets.length === 0) {
                adminSupportTable.innerHTML = '<tr><td colspan="6" style="text-align: center;">Ÿá€å⁄Ü ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™</td></tr>';
                return;
            }
            
            tickets.forEach(ticket => {
                const row = document.createElement('tr');
                const date = new Date(ticket.created_at).toLocaleDateString('fa-IR');
                const statusClass = `status-${ticket.status}`;
                const statusText = {
                    'pending': 'ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± Ÿæÿßÿ≥ÿÆ',
                    'answered': 'Ÿæÿßÿ≥ÿÆ ÿØÿßÿØŸá ÿ¥ÿØŸá',
                    'closed': 'ÿ®ÿ≥ÿ™Ÿá ÿ¥ÿØŸá'
                }[ticket.status] || ticket.status;
                
                row.innerHTML = `
                    <td>${ticket.user_name || '---'}</td>
                    <td>${ticket.subject}</td>
                    <td>${ticket.message.length > 50 ? ticket.message.substring(0, 50) + '...' : ticket.message}</td>
                    <td>${date}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        ${ticket.status !== 'closed' ? 
                          `<button class="action-btn btn-approve" data-id="${ticket.id}">Ÿæÿßÿ≥ÿÆ</button>` : ''}
                        <button class="action-btn btn-reject" data-id="${ticket.id}">${ticket.status === 'closed' ? 'ÿ≠ÿ∞ŸÅ' : 'ÿ®ÿ≥ÿ™ŸÜ'}</button>
                    </td>
                `;
                
                adminSupportTable.appendChild(row);
            });
        }

        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å Ÿàÿ∂ÿπ€åÿ™ ÿ≥ŸÅÿ±
        function updateTripStatus(tripId, status) {
            let trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]');
            trips = trips.map(trip => {
                if (trip.id == tripId) {
                    return {...trip, status: status};
                }
                return trip;
            });
            
            localStorage.setItem('snapp_trips', JSON.stringify(trips));
        }

        // ÿß€åÿ¨ÿßÿØ ÿ®ÿ±ÿÆ€å ÿØÿßÿØŸáŸáÿß€å ŸÜŸÖŸàŸÜŸá ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥
        function initializeSampleData() {
            // ÿß€åÿ¨ÿßÿØ ÿ®ÿ±ÿÆ€å ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ŸÜŸÖŸàŸÜŸá
            const users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
            
            if (users.length <= 1) { // ŸÅŸÇÿ∑ ⁄©ÿßÿ±ÿ®ÿ± ÿßÿØŸÖ€åŸÜ Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØ
                const sampleUsers = [
                    {
                        id: 2,
                        name: 'ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å',
                        email: 'ahmad@example.com',
                        phone: '0700111222',
                        password: '123456',
                        role: 'passenger',
                        status: 'approved',
                        created_at: new Date().toISOString(),
                        wallet_balance: 500
                    },
                    {
                        id: 3,
                        name: 'ÿ≤Ÿáÿ±ÿß ⁄©ÿ±€åŸÖ€å',
                        email: 'zahra@example.com',
                        phone: '0700333444',
                        password: '123456',
                        role: 'passenger',
                        status: 'pending',
                        created_at: new Date().toISOString()
                    },
                    {
                        id: 4,
                        name: 'ÿ±ÿ≠ŸÖÿßŸÜ ÿπŸÑ€å',
                        email: 'rahman@example.com',
                        phone: '0700555666',
                        password: '123456',
                        role: 'driver',
                        status: 'approved',
                        vehicle_type: 'car',
                        car_model: 'ÿ™Ÿà€åŸàÿ™ÿß ⁄©Ÿàÿ±ŸàŸÑÿß',
                        car_color: 'ÿ≥ŸÅ€åÿØ',
                        plate_number: '⁄©ÿßÿ®ŸÑ €±€≤€≥€¥',
                        driver_license: 'DL123456',
                        driver_status: 'active',
                        rating: 4.7,
                        created_at: new Date().toISOString()
                    }
                ];
                
                sampleUsers.forEach(user => users.push(user));
                localStorage.setItem('snapp_users', JSON.stringify(users));
            }
            
            // ÿß€åÿ¨ÿßÿØ ÿ®ÿ±ÿÆ€å ÿ≥ŸÅÿ±Ÿáÿß€å ŸÜŸÖŸàŸÜŸá
            const trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]');
            
            if (trips.length === 0) {
                const sampleTrips = [
                    {
                        id: 1,
                        pickup: '⁄©ÿßÿ±ÿ™Ÿá ÿ≥ÿÆ€å',
                        destination: 'ŸÖ€åÿØÿßŸÜ ŸáŸàÿß€å€å',
                        ride_type: 'economy',
                        distance: 12.5,
                        price: 112,
                        status: 'completed',
                        user_id: 2,
                        user_name: 'ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å',
                        driver_id: 4,
                        driver_name: 'ÿ±ÿ≠ŸÖÿßŸÜ ÿπŸÑ€å',
                        rated: true,
                        created_at: new Date(Date.now() - 86400000).toISOString() // ÿØ€åÿ±Ÿàÿ≤
                    },
                    {
                        id: 2,
                        pickup: 'ÿ¥Ÿáÿ± ŸÜŸà',
                        destination: 'ÿØÿ¥ÿ™ ÿ®ÿ±⁄Ü€å',
                        ride_type: 'comfort',
                        distance: 8.2,
                        price: 121,
                        status: 'confirmed',
                        user_id: 2,
                        user_name: 'ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å',
                        driver_id: 4,
                        driver_name: 'ÿ±ÿ≠ŸÖÿßŸÜ ÿπŸÑ€å',
                        created_at: new Date().toISOString()
                    }
                ];
                
                sampleTrips.forEach(trip => trips.push(trip));
                localStorage.setItem('snapp_trips', JSON.stringify(trips));
            }
            
            // ÿß€åÿ¨ÿßÿØ ÿ®ÿ±ÿÆ€å ÿ™ÿÆŸÅ€åŸÅŸáÿß€å ŸÜŸÖŸàŸÜŸá
            const discounts = JSON.parse(localStorage.getItem('snapp_discounts') || '[]');
            
            if (discounts.length === 0) {
                const futureDate = new Date();
                futureDate.setDate(futureDate.getDate() + 30); // 30 ÿ±Ÿàÿ≤ ÿ®ÿπÿØ
                
                const sampleDiscounts = [
                    {
                        id: 1,
                        code: 'SNAPP20',
                        percent: 20,
                        expiry_date: futureDate.toISOString(),
                        max_uses: 100,
                        used_count: 15,
                        created_at: new Date().toISOString()
                    },
                    {
                        id: 2,
                        code: 'WELCOME10',
                        percent: 10,
                        expiry_date: futureDate.toISOString(),
                        max_uses: 50,
                        used_count: 8,
                        created_at: new Date().toISOString()
                    }
                ];
                
                sampleDiscounts.forEach(discount => discounts.push(discount));
                localStorage.setItem('snapp_discounts', JSON.stringify(discounts));
            }
            
            // ÿß€åÿ¨ÿßÿØ ÿ®ÿ±ÿÆ€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™Ÿáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ŸÜŸÖŸàŸÜŸá
            const supportTickets = JSON.parse(localStorage.getItem('snapp_support') || '[]');
            
            if (supportTickets.length === 0) {
                const sampleTickets = [
                    {
                        id: 1,
                        subject: 'ŸÖÿ¥⁄©ŸÑ ÿØÿ± Ÿæÿ±ÿØÿßÿÆÿ™',
                        message: 'ŸáŸÜ⁄ØÿßŸÖ Ÿæÿ±ÿØÿßÿÆÿ™ Ÿáÿ≤€åŸÜŸá ÿ≥ŸÅÿ± ÿ®ÿß ÿÆÿ∑ÿß ŸÖŸàÿßÿ¨Ÿá ÿ¥ÿØŸÖ. ŸÑÿ∑ŸÅÿßŸã ÿ±ÿßŸáŸÜŸÖÿß€å€å ⁄©ŸÜ€åÿØ.',
                        user_id: 2,
                        user_name: 'ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å',
                        status: 'answered',
                        reply: 'ÿ®ÿß ÿ≥ŸÑÿßŸÖÿå ŸÖÿ¥⁄©ŸÑ Ÿæÿ±ÿØÿßÿÆÿ™ ÿ¥ŸÖÿß ÿ®ÿ±ÿ±ÿ≥€å ÿ¥ÿØ. ŸÑÿ∑ŸÅÿßŸã ÿßÿ™ÿµÿßŸÑ ÿß€åŸÜÿ™ÿ±ŸÜÿ™ ÿÆŸàÿØ ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ€åÿØ Ÿà ŸÖÿ¨ÿØÿØÿßŸã ÿ™ŸÑÿßÿ¥ ŸÜŸÖÿß€å€åÿØ.',
                        created_at: new Date(Date.now() - 172800000).toISOString() // 2 ÿ±Ÿàÿ≤ Ÿæ€åÿ¥
                    },
                    {
                        id: 2,
                        subject: 'ÿ±ÿßŸÜŸÜÿØŸá ŸÜ€åÿßŸÖÿØ',
                        message: 'ÿ±ÿßŸÜŸÜÿØŸá Ÿæÿ≥ ÿßÿ≤ ÿ™ÿ£€å€åÿØ ÿ≥ŸÅÿ±ÿå ÿØÿ± ŸÖÿ≠ŸÑ ÿ≠ÿßÿ∂ÿ± ŸÜÿ¥ÿØ.',
                        user_id: 2,
                        user_name: 'ÿßÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ€å',
                        status: 'pending',
                        created_at: new Date().toISOString()
                    }
                ];
                
                sampleTickets.forEach(ticket => supportTickets.push(ticket));
                localStorage.setItem('snapp_support', JSON.stringify(supportTickets));
            }
        }

        // €åÿßŸÅÿ™ŸÜ ŸÜÿ≤ÿØ€å⁄©ÿ™ÿ±€åŸÜ ÿ±ÿßŸÜŸÜÿØŸá
        function findNearestDriver(pickupLocation, rideType) {
            const drivers = JSON.parse(localStorage.getItem('snapp_users') || '[]')
                .filter(user => 
                    user.role === 'driver' && 
                    user.status === 'approved' && 
                    user.driver_status === 'active' &&
                    (rideType === 'bike' ? user.vehicle_type === 'bike' : user.vehicle_type === 'car')
                );
            
            if (drivers.length === 0) {
                return null;
            }
            
            // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ŸÖŸàŸÇÿπ€åÿ™ ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ ÿØÿ± ⁄©ÿßÿ®ŸÑ
            const driverPositions = drivers.map(driver => {
                const randomX = Math.floor(Math.random() * 80) + 10; // ÿ®€åŸÜ 10 ÿ™ÿß 90 ÿØÿ±ÿµÿØ
                const randomY = Math.floor(Math.random() * 80) + 10; // ÿ®€åŸÜ 10 ÿ™ÿß 90 ÿØÿ±ÿµÿØ
                
                return {
                    ...driver,
                    position: { x: randomX, y: randomY }
                };
            });
            
            // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ŸÖŸàŸÇÿπ€åÿ™ ŸÖÿ≥ÿßŸÅÿ±
            const passengerPosition = {
                x: Math.floor(Math.random() * 80) + 10,
                y: Math.floor(Math.random() * 80) + 10
            };
            
            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÅÿßÿµŸÑŸá Ÿáÿ± ÿ±ÿßŸÜŸÜÿØŸá ÿßÿ≤ ŸÖÿ≥ÿßŸÅÿ±
            driverPositions.forEach(driver => {
                const dx = driver.position.x - passengerPosition.x;
                const dy = driver.position.y - passengerPosition.y;
                driver.distance = Math.sqrt(dx * dx + dy * dy);
            });
            
            // ŸÖÿ±ÿ™ÿ®ÿ≥ÿßÿ≤€å ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÅÿßÿµŸÑŸá
            driverPositions.sort((a, b) => a.distance - b.distance);
            
            // ÿßŸÜÿ™ÿÆÿßÿ® ŸÜÿ≤ÿØ€å⁄©ÿ™ÿ±€åŸÜ ÿ±ÿßŸÜŸÜÿØŸá
            const nearestDriver = driverPositions[0];
            
            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿ≤ŸÖÿßŸÜ ÿ±ÿ≥€åÿØŸÜ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÅÿßÿµŸÑŸá
            const eta = Math.max(2, Math.round(nearestDriver.distance / 10)); // ÿ≠ÿØÿßŸÇŸÑ 2 ÿØŸÇ€åŸÇŸá
            
            return {
                ...nearestDriver,
                eta: `${eta} ÿØŸÇ€åŸÇŸá`,
                distance: `${(nearestDriver.distance / 10).toFixed(1)} ⁄©€åŸÑŸàŸÖÿ™ÿ±`,
                position: nearestDriver.position
            };
        }

        // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÖÿØÿßŸÑ ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å
        function openRatingModal(tripId = null) {
            const ratingModal = document.getElementById('ratingModal');
            const ratingStars = document.getElementById('ratingStars');
            
            if (!ratingModal || !ratingStars) return;
            
            const stars = ratingStars.querySelectorAll('.rating-star');
            
            // ÿ®ÿßÿ≤ŸÜÿ¥ÿßŸÜ€å ÿ≥ÿ™ÿßÿ±ŸáŸáÿß
            stars.forEach(star => {
                star.classList.remove('active');
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    
                    stars.forEach(s => {
                        if (parseInt(s.getAttribute('data-rating')) <= rating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });
            });
            
            ratingModal.style.display = 'flex';
            
            // ÿ∞ÿÆ€åÿ±Ÿá tripId ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ®ÿπÿØ€å
            if (tripId) {
                ratingModal.setAttribute('data-trip-id', tripId);
            }
        }

        // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÖÿØÿßŸÑ Ÿæÿ±ÿØÿßÿÆÿ™
        function openPaymentModal() {
            const paymentModal = document.getElementById('paymentModal');
            if (!paymentModal) return;
            
            const paymentDistance = document.getElementById('paymentDistance');
            const paymentPrice = document.getElementById('paymentPrice');
            
            if (paymentDistance) paymentDistance.textContent = `${currentDistance} ⁄©€åŸÑŸàŸÖÿ™ÿ±`;
            if (paymentPrice) paymentPrice.textContent = `${currentPrice} ÿßŸÅÿ∫ÿßŸÜ€å`;
            
            // ÿ™ŸÜÿ∏€åŸÖ ÿ±Ÿàÿ¥ Ÿæÿ±ÿØÿßÿÆÿ™ Ÿæ€åÿ¥ŸÅÿ±ÿ∂
            document.querySelectorAll('.payment-method').forEach(method => {
                method.classList.remove('selected');
                if (method.getAttribute('data-method') === selectedPaymentMethod) {
                    method.classList.add('selected');
                }
            });
            
            // ŸÜŸÖÿß€åÿ¥/ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ ÿ®ÿÆÿ¥ ⁄©€åŸÅ ŸæŸàŸÑ
            const walletPayment = document.getElementById('walletPayment');
            if (selectedPaymentMethod === 'wallet') {
                if (walletPayment) walletPayment.style.display = 'block';
                const walletBalance = document.getElementById('walletBalance');
                if (walletBalance) walletBalance.textContent = currentUser?.wallet_balance || 0;
            } else {
                if (walletPayment) walletPayment.style.display = 'none';
            }
            
            paymentModal.style.display = 'flex';
        }

        // ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿßŸàŸÑ€åŸá
        window.onload = function() {
            createKabulMap();
            createDistrictsList();
            checkUserLoginStatus();
            initializeSampleData();
            
            // ÿØ⁄©ŸÖŸá ÿ¥ÿ±Ÿàÿπ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿßÿ≥ŸÜŸæ
            const startUsingBtn = document.getElementById('start-using-btn');
            if (startUsingBtn) {
                startUsingBtn.addEventListener('click', () => {
                    const welcomePage = document.getElementById('welcome-page');
                    const mainHeader = document.getElementById('main-header');
                    const mainContainer = document.getElementById('main-container');
                    const mainFooter = document.getElementById('main-footer');
                    
                    if (welcomePage) welcomePage.style.display = 'none';
                    if (mainHeader) mainHeader.style.display = 'block';
                    if (mainContainer) mainContainer.style.display = 'block';
                    if (mainFooter) mainFooter.style.display = 'block';
                    showNotification('ÿ®Ÿá ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ! ÿ≥ÿ±Ÿà€åÿ≥ ÿ™ÿß⁄©ÿ≥€å ÿßŸÜÿ™ÿ±ŸÜÿ™€å ÿØÿ± ÿ≥ÿ±ÿßÿ≥ÿ± ⁄©ÿßÿ®ŸÑ');
                });
            }
            
            // ÿØ⁄©ŸÖŸá ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ®€åÿ¥ÿ™ÿ±
            const learnMoreBtn = document.getElementById('learn-more-btn');
            if (learnMoreBtn) {
                learnMoreBtn.addEventListener('click', () => {
                    showNotification('ÿßÿ≥ŸÜŸæ ÿßŸÅÿ∫ÿßŸÜÿ≥ÿ™ÿßŸÜ ÿßŸàŸÑ€åŸÜ ÿ≥ÿ±Ÿà€åÿ≥ ÿ™ÿß⁄©ÿ≥€å ÿß€åŸÜÿ™ÿ±ŸÜÿ™€å ÿØÿ± ⁄©ÿßÿ®ŸÑ ÿßÿ≥ÿ™ ⁄©Ÿá ÿ®ÿß ŸáÿØŸÅ ÿßÿ±ÿßÿ¶Ÿá ÿÆÿØŸÖÿßÿ™ ÿ≥ÿ±€åÿπ Ÿà ŸÖÿ∑ŸÖÿ¶ŸÜ ÿ®Ÿá ÿ¥Ÿáÿ±ŸàŸÜÿØÿßŸÜ ÿß€åÿ¨ÿßÿØ ÿ¥ÿØŸá ÿßÿ≥ÿ™.');
                });
            }
            
            // ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸàÿπ ÿ≥ŸÅÿ±
            const rideTypeSelector = document.getElementById('rideTypeSelector');
            if (rideTypeSelector) {
                const rideTypes = rideTypeSelector.querySelectorAll('.ride-type');

                rideTypes.forEach(type => {
                    type.addEventListener('click', () => {
                        rideTypes.forEach(t => t.classList.remove('selected'));
                        type.classList.add('selected');
                        selectedRideType = type.dataset.type;
                        
                        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÇ€åŸÖÿ™ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÜŸàÿπ ÿ≥ŸÅÿ±
                        updatePrice();
                    });
                });

                // ÿßŸÜÿ™ÿÆÿßÿ® ÿßŸàŸÑ€åŸá
                if (rideTypes.length > 0) {
                    rideTypes[0].classList.add('selected');
                }
            }

            // ÿßŸÜÿ™ÿÆÿßÿ® ÿ±Ÿàÿ¥ Ÿæÿ±ÿØÿßÿÆÿ™
            const paymentMethods = document.querySelectorAll('.payment-method');
            paymentMethods.forEach(method => {
                method.addEventListener('click', () => {
                    paymentMethods.forEach(m => m.classList.remove('selected'));
                    method.classList.add('selected');
                    selectedPaymentMethod = method.getAttribute('data-method');
                });
            });

            // ÿ™ÿπŸà€åÿ∂ ŸÖÿ®ÿØÿß Ÿà ŸÖŸÇÿµÿØ
            const swapBtn = document.getElementById('swapLocations');
            const pickupInput = document.getElementById('pickup');
            const destinationInput = document.getElementById('destination');
            
            if (swapBtn && pickupInput && destinationInput) {
                swapBtn.addEventListener('click', () => {
                    const pickupValue = pickupInput.value;
                    const destinationValue = destinationInput.value;
                    
                    if (!destinationValue) {
                        showNotification('ŸÑÿ∑ŸÅÿßŸã ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿµÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ', 'error');
                        return;
                    }
                    
                    pickupInput.value = destinationValue;
                    destinationInput.value = pickupValue;
                    
                    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ¨ÿØÿØ ŸÖÿ≥ÿßŸÅÿ™ Ÿà ŸÇ€åŸÖÿ™
                    calculateDistanceAndPrice();
                    showNotification('ŸÖÿ®ÿØÿß Ÿà ŸÖŸÇÿµÿØ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ™ÿπŸà€åÿ∂ ÿ¥ÿØŸÜÿØ');
                });
            }

            // Ÿæ€åÿ¥ŸÜŸáÿßÿØÿßÿ™ ŸÖŸÇÿµÿØ
            const suggestionItems = document.querySelectorAll('.suggestion-item');
            suggestionItems.forEach(item => {
                item.addEventListener('click', () => {
                    if (destinationInput) {
                        destinationInput.value = item.dataset.destination;
                        calculateDistanceAndPrice();
                        showNotification(`ŸÖŸÇÿµÿØ ÿ®Ÿá "${item.dataset.destination}" ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ`);
                    }
                });
            });

            // ŸÖÿØ€åÿ±€åÿ™ ŸÅÿ±ŸÖ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ≥ŸÅÿ±
            const rideForm = document.getElementById('rideForm');
            const submitBtn = document.getElementById('submitBtn');
            const searchingOverlay = document.getElementById('searchingOverlay');
            const searchingText = document.getElementById('searchingText');
            const cancelSearch = document.getElementById('cancelSearch');
            const driverModal = document.getElementById('driverModal');
            const closeModal = document.getElementById('closeModal');
            const cancelRide = document.getElementById('cancelRide');
            const confirmRide = document.getElementById('confirmRide');

            if (rideForm) {
                rideForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    if (!currentUser) {
                        showNotification('ŸÑÿ∑ŸÅÿßŸã ÿßÿ®ÿ™ÿØÿß Ÿàÿßÿ±ÿØ ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å ÿÆŸàÿØ ÿ¥Ÿà€åÿØ', 'error');
                        openAuthModal();
                        return;
                    }
                    
                    const pickup = pickupInput?.value;
                    const destination = destinationInput?.value;

                    if (!pickup || !destination) {
                        showNotification('ŸÑÿ∑ŸÅÿßŸã ŸÖÿ®ÿØÿß Ÿà ŸÖŸÇÿµÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ', 'error');
                        return;
                    }

                    if (pickup === destination) {
                        showNotification('ŸÖÿ®ÿØÿß Ÿà ŸÖŸÇÿµÿØ ŸÜŸÖ€åÿ™ŸàÿßŸÜŸÜÿØ €å⁄©ÿ≥ÿßŸÜ ÿ®ÿßÿ¥ŸÜÿØ', 'error');
                        return;
                    }

                    if (currentDistance === 0) {
                        showNotification('ŸÑÿ∑ŸÅÿßŸã ŸÖŸÜÿ™ÿ∏ÿ± ÿ®ŸÖÿßŸÜ€åÿØ ÿ™ÿß ŸÖÿ≥ÿßŸÅÿ™ ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿ¥ŸàÿØ', 'error');
                        return;
                    }

                    // ÿ∞ÿÆ€åÿ±Ÿá ÿ≥ŸÅÿ± ÿØÿ± localStorage
                    const tripData = {
                        id: Date.now(),
                        pickup,
                        destination,
                        ride_type: selectedRideType,
                        distance: currentDistance,
                        price: currentPrice,
                        status: 'requested',
                        user_id: currentUser.id,
                        user_name: currentUser.name,
                        payment_method: selectedPaymentMethod,
                        created_at: new Date().toISOString()
                    };

                    try {
                        const trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]');
                        trips.push(tripData);
                        localStorage.setItem('snapp_trips', JSON.stringify(trips));
                        currentTripId = tripData.id;

                        showNotification('ÿ≥ŸÅÿ± ÿ¥ŸÖÿß ÿ´ÿ®ÿ™ ÿ¥ÿØ. ÿØÿ± ÿ≠ÿßŸÑ €åÿßŸÅÿ™ŸÜ ÿ±ÿßŸÜŸÜÿØŸá...');

                        // ÿ¥ÿ±Ÿàÿπ ÿ¨ÿ≥ÿ™ÿ¨Ÿà
                        startDriverSearch();
                    } catch (error) {
                        console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ´ÿ®ÿ™ ÿ≥ŸÅÿ±:', error);
                        showNotification('ÿÆÿ∑ÿß ÿØÿ± ÿ´ÿ®ÿ™ ÿ≥ŸÅÿ±. ŸÑÿ∑ŸÅÿßŸã ŸÖÿ¨ÿØÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', 'error');
                    }
                });
            }

            function startDriverSearch() {
                if (submitBtn) submitBtn.disabled = true;
                if (searchingOverlay) searchingOverlay.style.display = 'flex';
                
                let searchTime = 0;
                const searchInterval = setInterval(() => {
                    searchTime++;
                    
                    if (searchTime === 3 && searchingText) {
                        searchingText.textContent = "ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿ±ÿ±ÿ≥€å ÿ±ÿßŸÜŸÜÿØ⁄ØÿßŸÜ ŸÖŸàÿ¨ŸàÿØ...";
                    } else if (searchTime === 6 && searchingText) {
                        searchingText.textContent = "ÿ®ÿ±ŸÇÿ±ÿßÿ±€å ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿß ÿ±ÿßŸÜŸÜÿØŸá...";
                    } else if (searchTime === 9) {
                        // Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá
                        clearInterval(searchInterval);
                        findDriver();
                    }
                }, 500);
                
                // ÿ∞ÿÆ€åÿ±Ÿá interval ÿ®ÿ±ÿß€å ŸÑÿ∫Ÿà
                window.searchInterval = searchInterval;
            }

            function findDriver() {
                if (searchingOverlay) searchingOverlay.style.display = 'none';
                if (submitBtn) submitBtn.disabled = false;
                
                // €åÿßŸÅÿ™ŸÜ ŸÜÿ≤ÿØ€å⁄©ÿ™ÿ±€åŸÜ ÿ±ÿßŸÜŸÜÿØŸá
                const nearestDriver = findNearestDriver(pickupInput?.value, selectedRideType);
                
                if (!nearestDriver) {
                    showNotification('Ÿá€å⁄Ü ÿ±ÿßŸÜŸÜÿØŸáÿß€å ÿØÿ± ÿ≠ÿßŸÑ ÿ≠ÿßÿ∂ÿ± ÿØÿ± ÿØÿ≥ÿ™ÿ±ÿ≥ ŸÜ€åÿ≥ÿ™. ŸÑÿ∑ŸÅÿßŸã ÿ®ÿπÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', 'error');
                    return;
                }
                
                currentDriver = nearestDriver;
                
                // Ÿæÿ± ⁄©ÿ±ÿØŸÜ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ±ÿßŸÜŸÜÿØŸá ÿØÿ± ŸÖÿØÿßŸÑ
                const driverAvatar = document.getElementById('driverAvatar');
                const driverName = document.getElementById('driverName');
                const driverRating = document.getElementById('driverRating');
                const driverTrips = document.getElementById('driverTrips');
                const carModel = document.getElementById('carModel');
                const carColor = document.getElementById('carColor');
                const plateNumber = document.getElementById('plateNumber');
                const eta = document.getElementById('eta');
                const distance = document.getElementById('distance');
                const price = document.getElementById('price');
                
                if (driverAvatar) driverAvatar.textContent = nearestDriver.name.charAt(0);
                if (driverName) driverName.textContent = nearestDriver.name;
                if (driverRating) driverRating.textContent = nearestDriver.rating || '€¥.€∑';
                if (driverTrips) driverTrips.textContent = `(${Math.floor(Math.random() * 200) + 50} ÿ≥ŸÅÿ±)`;
                if (carModel) carModel.textContent = nearestDriver.car_model || '---';
                if (carColor) carColor.textContent = nearestDriver.car_color || '---';
                if (plateNumber) plateNumber.textContent = nearestDriver.plate_number || '---';
                if (eta) eta.textContent = nearestDriver.eta;
                if (distance) distance.textContent = nearestDriver.distance;
                if (price) price.textContent = `${currentPrice} ÿßŸÅÿ∫ÿßŸÜ€å`;
                
                // ŸÜŸÖÿß€åÿ¥ ŸÖÿØÿßŸÑ
                if (driverModal) driverModal.style.display = 'flex';
                
                showNotification(`ÿ±ÿßŸÜŸÜÿØŸá ${nearestDriver.name} Ÿæ€åÿØÿß ÿ¥ÿØ!`);
            }

            // ŸÑÿ∫Ÿà ÿ¨ÿ≥ÿ™ÿ¨Ÿà
            if (cancelSearch) {
                cancelSearch.addEventListener('click', () => {
                    clearInterval(window.searchInterval);
                    if (searchingOverlay) searchingOverlay.style.display = 'none';
                    if (submitBtn) submitBtn.disabled = false;
                    showNotification('ÿ¨ÿ≥ÿ™ÿ¨Ÿà ŸÑÿ∫Ÿà ÿ¥ÿØ');
                });
            }

            // ÿ®ÿ≥ÿ™ŸÜ ŸÖÿØÿßŸÑ
            if (closeModal) {
                closeModal.addEventListener('click', () => {
                    if (driverModal) driverModal.style.display = 'none';
                });
            }

            // ŸÑÿ∫Ÿà ÿ≥ŸÅÿ±
            if (cancelRide) {
                cancelRide.addEventListener('click', () => {
                    if (driverModal) driverModal.style.display = 'none';
                    updateTripStatus(currentTripId, 'cancelled');
                    showNotification('ÿ≥ŸÅÿ± ÿ¥ŸÖÿß ŸÑÿ∫Ÿà ÿ¥ÿØ.');
                });
            }

            // ÿ™ÿ£€å€åÿØ ÿ≥ŸÅÿ±
            if (confirmRide) {
                confirmRide.addEventListener('click', async () => {
                    if (driverModal) driverModal.style.display = 'none';
                    
                    try {
                        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å Ÿàÿ∂ÿπ€åÿ™ ÿ≥ŸÅÿ±
                        updateTripStatus(currentTripId, 'confirmed');
                        
                        // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ≥€åÿ±
                        const route = calculateRoute(pickupInput?.value, destinationInput?.value);
                        
                        // ÿ¥ÿ±Ÿàÿπ ÿ±ÿØ€åÿßÿ®€å ÿ≥ŸÅÿ±
                        startTripTracking(currentDriver, route);

                        showNotification('ÿ≥ŸÅÿ± ÿ¥ŸÖÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ. ÿ±ÿßŸÜŸÜÿØŸá ÿ®Ÿá ÿ≤ŸàÿØ€å ÿ®ÿß ÿ¥ŸÖÿß ÿ™ŸÖÿßÿ≥ ÿÆŸàÿßŸáÿØ ⁄Øÿ±ŸÅÿ™.');
                        
                        // ÿ®ÿßÿ≤ŸÜÿ¥ÿßŸÜ€å ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿßŸàŸÑ€åŸá
                        if (rideForm) rideForm.reset();
                        const tripCalculator = document.getElementById('tripCalculator');
                        if (tripCalculator) tripCalculator.classList.remove('active');
                        currentDistance = 0;
                        currentPrice = 0;
                        
                        const rideTypes = document.querySelectorAll('.ride-type');
                        rideTypes.forEach(t => t.classList.remove('selected'));
                        if (rideTypes.length > 0) rideTypes[0].classList.add('selected');
                        selectedRideType = 'economy';
                    } catch (error) {
                        console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ™ÿ£€å€åÿØ ÿ≥ŸÅÿ±:', error);
                        showNotification('ÿÆÿ∑ÿß ÿØÿ± ÿ™ÿ£€å€åÿØ ÿ≥ŸÅÿ±. ŸÑÿ∑ŸÅÿßŸã ŸÖÿ¨ÿØÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', 'error');
                    }
                });
            }

            // ŸÑÿ∫Ÿà ÿ±ÿØ€åÿßÿ®€å ÿ≥ŸÅÿ±
            const cancelTracking = document.getElementById('cancelTracking');
            if (cancelTracking) {
                cancelTracking.addEventListener('click', () => {
                    if (confirm('ÿ¢€åÿß ÿßÿ≤ ŸÑÿ∫Ÿà ÿß€åŸÜ ÿ≥ŸÅÿ± ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')) {
                        const liveTracking = document.getElementById('liveTracking');
                        if (liveTracking) liveTracking.style.display = 'none';
                        clearRoute();
                        if (carAnimationInterval) {
                            clearInterval(carAnimationInterval);
                        }
                        updateTripStatus(currentTripId, 'cancelled');
                        showNotification('ÿ≥ŸÅÿ± ŸÑÿ∫Ÿà ÿ¥ÿØ');
                    }
                });
            }

            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ≥ÿßŸÅÿ™ ŸáŸÜ⁄ØÿßŸÖ ÿ™ÿ∫€å€åÿ± ŸÖŸÇÿµÿØ
            if (destinationInput) {
                destinationInput.addEventListener('input', () => {
                    setTimeout(calculateDistanceAndPrice, 1000);
                });
            }

            if (pickupInput) {
                pickupInput.addEventListener('input', () => {
                    setTimeout(calculateDistanceAndPrice, 1000);
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ŸÖÿØÿßŸÑ Ÿàÿ±ŸàÿØ/ÿ´ÿ®ÿ™ŸÜÿßŸÖ
            const authModal = document.getElementById('authModal');
            const loginBtn = document.getElementById('loginBtn');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const closeAuthModal = document.getElementById('closeAuthModal');
            const formTabs = document.querySelectorAll('.form-tab');
            const formTabContents = document.querySelectorAll('.form-tab-content');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const forgotPasswordLink = document.getElementById('forgotPassword');
            const forgotPasswordModal = document.getElementById('forgotPasswordModal');
            const closeForgotPasswordModal = document.getElementById('closeForgotPasswordModal');
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');

            // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÖÿØÿßŸÑ
            function openAuthModal() {
                if (authModal) authModal.style.display = 'flex';
                clearErrors();
            }

            // ÿ®ÿ≥ÿ™ŸÜ ŸÖÿØÿßŸÑ
            function closeAuthModalFunc() {
                if (authModal) authModal.style.display = 'none';
            }

            // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÖÿØÿßŸÑ ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            function openForgotPasswordModal() {
                if (forgotPasswordModal) forgotPasswordModal.style.display = 'flex';
                closeAuthModalFunc();
                clearErrors();
            }

            // ÿ®ÿ≥ÿ™ŸÜ ŸÖÿØÿßŸÑ ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            function closeForgotPasswordModalFunc() {
                if (forgotPasswordModal) forgotPasswordModal.style.display = 'none';
            }

            // ŸÖÿØ€åÿ±€åÿ™ ÿ±Ÿà€åÿØÿßÿØŸáÿß
            if (loginBtn) loginBtn.addEventListener('click', openAuthModal);
            if (mobileLoginBtn) mobileLoginBtn.addEventListener('click', openAuthModal);
            if (closeAuthModal) closeAuthModal.addEventListener('click', closeAuthModalFunc);
            if (forgotPasswordLink) {
                forgotPasswordLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    openForgotPasswordModal();
                });
            }
            if (closeForgotPasswordModal) {
                closeForgotPasswordModal.addEventListener('click', closeForgotPasswordModalFunc);
            }

            // ŸÖÿØ€åÿ±€åÿ™ ÿ™ÿ®Ÿáÿß€å ŸÅÿ±ŸÖ
            formTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    formTabs.forEach(t => t.classList.remove('active'));
                    formTabContents.forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    const tabContent = document.getElementById(`${tabId}-tab`);
                    if (tabContent) tabContent.classList.add('active');
                    
                    clearErrors();
                });
            });

            // ŸÖÿØ€åÿ±€åÿ™ ŸÜŸÖÿß€åÿ¥/ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const inputId = this.id.replace('Toggle', '');
                    const input = document.getElementById(inputId);
                    const icon = this.querySelector('i');
                    
                    if (input && icon) {
                        if (input.type === 'password') {
                            input.type = 'text';
                            icon.classList.remove('fa-eye');
                            icon.classList.add('fa-eye-slash');
                        } else {
                            input.type = 'password';
                            icon.classList.remove('fa-eye-slash');
                            icon.classList.add('fa-eye');
                        }
                    }
                });
            });

            // ŸÖÿØ€åÿ±€åÿ™ ŸÅÿ±ŸÖ ÿ´ÿ®ÿ™ŸÜÿßŸÖ
            if (registerForm) {
                registerForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    if (!validateRegisterForm()) {
                        return;
                    }
                    
                    const name = document.getElementById('registerName')?.value.trim();
                    const email = document.getElementById('registerEmail')?.value.trim();
                    const phone = document.getElementById('registerPhone')?.value.trim();
                    const password = document.getElementById('registerPassword')?.value;
                    const userType = document.getElementById('userType')?.value;
                    
                    const userData = {
                        id: Date.now(),
                        name,
                        email,
                        phone,
                        password,
                        role: userType,
                        status: 'pending',
                        created_at: new Date().toISOString()
                    };
                    
                    try {
                        // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ API
                        const submitBtn = document.getElementById('registerSubmitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = true;
                            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÿØÿ± ÿ≠ÿßŸÑ ÿ´ÿ®ÿ™ŸÜÿßŸÖ...';
                        }
                        
                        // ÿ™ÿßÿÆ€åÿ± ÿ®ÿ±ÿß€å ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ¥ÿ®⁄©Ÿá
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        // ÿ∞ÿÆ€åÿ±Ÿá ⁄©ÿßÿ±ÿ®ÿ± ÿØÿ± localStorage
                        const users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
                        
                        // ÿ®ÿ±ÿ±ÿ≥€å ÿ™⁄©ÿ±ÿßÿ±€å ŸÜÿ®ŸàÿØŸÜ ÿß€åŸÖ€åŸÑ
                        const existingUser = users.find(user => user.email === email);
                        if (existingUser) {
                            showError('registerEmail', 'ÿß€åŸÜ ÿß€åŸÖ€åŸÑ ŸÇÿ®ŸÑÿßŸã ÿ´ÿ®ÿ™ ÿ¥ÿØŸá ÿßÿ≥ÿ™');
                            if (submitBtn) {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = 'ÿ´ÿ®ÿ™ŸÜÿßŸÖ';
                            }
                            return;
                        }
                        
                        users.push(userData);
                        localStorage.setItem('snapp_users', JSON.stringify(users));
                        
                        showNotification('ÿ´ÿ®ÿ™ŸÜÿßŸÖ ÿ¥ŸÖÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ. Ÿæÿ≥ ÿßÿ≤ ÿ™ÿß€å€åÿØ ŸÖÿØ€åÿ± ŸÖ€åÿ™ŸàÿßŸÜ€åÿØ Ÿàÿßÿ±ÿØ ÿ¥Ÿà€åÿØ.');
                        registerForm.reset();
                        
                        // ÿ™ÿ∫€å€åÿ± ÿ®Ÿá ÿ™ÿ® Ÿàÿ±ŸàÿØ
                        formTabs.forEach(t => t.classList.remove('active'));
                        formTabContents.forEach(c => c.classList.remove('active'));
                        if (formTabs.length > 0) formTabs[0].classList.add('active');
                        const loginTab = document.getElementById('login-tab');
                        if (loginTab) loginTab.classList.add('active');
                        
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = 'ÿ´ÿ®ÿ™ŸÜÿßŸÖ';
                        }
                    } catch (error) {
                        console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ´ÿ®ÿ™ŸÜÿßŸÖ:', error);
                        showNotification('ÿÆÿ∑ÿß ÿØÿ± ÿ´ÿ®ÿ™ŸÜÿßŸÖ. ŸÑÿ∑ŸÅÿßŸã ŸÖÿ¨ÿØÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', 'error');
                        
                        const submitBtn = document.getElementById('registerSubmitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = 'ÿ´ÿ®ÿ™ŸÜÿßŸÖ';
                        }
                    }
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ŸÅÿ±ŸÖ Ÿàÿ±ŸàÿØ
            if (loginForm) {
                loginForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    if (!validateLoginForm()) {
                        return;
                    }
                    
                    const email = document.getElementById('loginEmail')?.value.trim();
                    const password = document.getElementById('loginPassword')?.value;
                    
                    try {
                        // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ API
                        const submitBtn = document.getElementById('loginSubmitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = true;
                            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÿØÿ± ÿ≠ÿßŸÑ Ÿàÿ±ŸàÿØ...';
                        }
                        
                        // ÿ™ÿßÿÆ€åÿ± ÿ®ÿ±ÿß€å ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ¥ÿ®⁄©Ÿá
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        // ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ⁄©ÿßÿ±ÿ®ÿ± ÿØÿ± localStorage
                        const users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
                        const user = users.find(u => 
                            (u.email === email || u.phone === email) && 
                            u.password === password
                        );
                        
                        if (!user) {
                            showError('loginEmail', 'ÿß€åŸÖ€åŸÑ/ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ €åÿß ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿßÿ¥ÿ™ÿ®ÿßŸá ÿßÿ≥ÿ™');
                            if (submitBtn) {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = 'Ÿàÿ±ŸàÿØ';
                            }
                            return;
                        }
                        
                        if (user.status !== 'approved') {
                            showError('loginEmail', 'ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å ÿ¥ŸÖÿß ŸáŸÜŸàÿ≤ ÿ™ÿß€å€åÿØ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™');
                            if (submitBtn) {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = 'Ÿàÿ±ŸàÿØ';
                            }
                            return;
                        }
                        
                        currentUser = user;
                        isAdmin = currentUser.role === 'admin';
                        localStorage.setItem('snapp_current_user', JSON.stringify(currentUser));
                        
                        showNotification(`ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ ${currentUser.name}`);
                        closeAuthModalFunc();
                        loginForm.reset();
                        updateUIAfterLogin();
                        
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = 'Ÿàÿ±ŸàÿØ';
                        }
                    } catch (error) {
                        console.error('ÿÆÿ∑ÿß ÿØÿ± Ÿàÿ±ŸàÿØ:', error);
                        showNotification('ÿÆÿ∑ÿß ÿØÿ± Ÿàÿ±ŸàÿØ. ŸÑÿ∑ŸÅÿßŸã ŸÖÿ¨ÿØÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', 'error');
                        
                        const submitBtn = document.getElementById('loginSubmitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = 'Ÿàÿ±ŸàÿØ';
                        }
                    }
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ŸÅÿ±ŸÖ ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
            if (forgotPasswordForm) {
                forgotPasswordForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    if (!validateForgotPasswordForm()) {
                        return;
                    }
                    
                    const email = document.getElementById('forgotPasswordEmail')?.value.trim();
                    
                    try {
                        // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ API
                        const submitBtn = document.getElementById('forgotPasswordSubmitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = true;
                            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ±ÿ≥ÿßŸÑ...';
                        }
                        
                        // ÿ™ÿßÿÆ€åÿ± ÿ®ÿ±ÿß€å ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ¥ÿ®⁄©Ÿá
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        // ÿ®ÿ±ÿ±ÿ≥€å Ÿàÿ¨ŸàÿØ ⁄©ÿßÿ±ÿ®ÿ±
                        const users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
                        const user = users.find(u => u.email === email || u.phone === email);
                        
                        if (!user) {
                            showError('forgotPasswordEmail', '⁄©ÿßÿ±ÿ®ÿ±€å ÿ®ÿß ÿß€åŸÜ ÿß€åŸÖ€åŸÑ/ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ €åÿßŸÅÿ™ ŸÜÿ¥ÿØ');
                            if (submitBtn) {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = 'ÿßÿ±ÿ≥ÿßŸÑ ŸÑ€åŸÜ⁄© ÿ®ÿßÿ≤€åÿßÿ®€å';
                            }
                            return;
                        }
                        
                        showNotification('ŸÑ€åŸÜ⁄© ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿ®Ÿá ÿß€åŸÖ€åŸÑ/ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿ¥ŸÖÿß ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ÿØ');
                        closeForgotPasswordModalFunc();
                        forgotPasswordForm.reset();
                        
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = 'ÿßÿ±ÿ≥ÿßŸÑ ŸÑ€åŸÜ⁄© ÿ®ÿßÿ≤€åÿßÿ®€å';
                        }
                    } catch (error) {
                        console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±:', error);
                        showNotification('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ≤€åÿßÿ®€å ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±. ŸÑÿ∑ŸÅÿßŸã ŸÖÿ¨ÿØÿØÿßŸã ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ.', 'error');
                        
                        const submitBtn = document.getElementById('forgotPasswordSubmitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = 'ÿßÿ±ÿ≥ÿßŸÑ ŸÑ€åŸÜ⁄© ÿ®ÿßÿ≤€åÿßÿ®€å';
                        }
                    }
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ÿÆÿ±Ÿàÿ¨
            const logoutBtn = document.getElementById('logoutBtn');
            const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
            
            if (logoutBtn) logoutBtn.addEventListener('click', logout);
            if (mobileLogoutBtn) mobileLogoutBtn.addEventListener('click', logout);

            // ŸÖÿØ€åÿ±€åÿ™ ŸÖŸÜŸà€å ŸÖŸàÿ®ÿß€åŸÑ
            const hamburger = document.getElementById('hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            const closeMenu = document.getElementById('closeMenu');
            const overlay = document.getElementById('overlay');

            if (hamburger && mobileMenu && overlay) {
                hamburger.addEventListener('click', () => {
                    mobileMenu.classList.add('active');
                    overlay.classList.add('active');
                });

                closeMenu.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                    overlay.classList.remove('active');
                });

                overlay.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                    overlay.classList.remove('active');
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ÿµŸÅÿ≠ÿßÿ™
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('data-page') + '-page';
                    
                    // ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ ŸáŸÖŸá ÿµŸÅÿ≠ÿßÿ™
                    pages.forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    // ŸÜŸÖÿß€åÿ¥ ÿµŸÅÿ≠Ÿá ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá
                    const targetPage = document.getElementById(pageId);
                    if (targetPage) targetPage.classList.add('active');
                    
                    // ÿ®ÿ≥ÿ™ŸÜ ŸÖŸÜŸà€å ŸÖŸàÿ®ÿß€åŸÑ
                    if (mobileMenu) mobileMenu.classList.remove('active');
                    if (overlay) overlay.classList.remove('active');
                    
                    // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿØÿßÿØŸáŸáÿß€å ÿµŸÅÿ≠Ÿá
                    if (pageId === 'my-trips-page') {
                        loadMyTrips();
                    } else if (pageId === 'discounts-page') {
                        loadDiscounts();
                    } else if (pageId === 'support-page') {
                        loadSupportTickets();
                    } else if (pageId === 'profile-page') {
                        updateProfilePage();
                    } else if (pageId === 'admin-page') {
                        loadAdminPanel();
                    }
                });
            });

            // ŸÖÿØ€åÿ±€åÿ™ ⁄Üÿ™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å
            const chatInput = document.getElementById('chatInput');
            const sendMessage = document.getElementById('sendMessage');
            const chatMessages = document.getElementById('chatMessages');

            function addMessage(message, isReceived = false) {
                if (!chatMessages) return;
                
                const messageElement = document.createElement('div');
                messageElement.className = `message ${isReceived ? 'received' : 'sent'}`;
                messageElement.textContent = message;
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            if (sendMessage && chatInput) {
                sendMessage.addEventListener('click', () => {
                    const message = chatInput.value.trim();
                    if (message) {
                        addMessage(message);
                        chatInput.value = '';
                        
                        // ÿ¥ÿ®€åŸáÿ≥ÿßÿ≤€å Ÿæÿßÿ≥ÿÆ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å
                        setTimeout(() => {
                            const responses = [
                                'ŸÖÿ™ÿ¥⁄©ÿ±€åŸÖ ÿßÿ≤ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß. ⁄Ü⁄ØŸàŸÜŸá ŸÖ€åÿ™ŸàÿßŸÜ€åŸÖ ⁄©ŸÖ⁄©ÿ™ÿßŸÜ ⁄©ŸÜ€åŸÖÿü',
                                'Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿØÿ±€åÿßŸÅÿ™ ÿ¥ÿØ. ŸáŸÖ⁄©ÿßÿ±ÿßŸÜ ŸÖÿß ÿ®Ÿá ÿ≤ŸàÿØ€å ÿ®ÿß ÿ¥ŸÖÿß ÿ™ŸÖÿßÿ≥ ÿÆŸàÿßŸáŸÜÿØ ⁄Øÿ±ŸÅÿ™.',
                                'ŸÑÿ∑ŸÅÿßŸã ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß ÿ®ÿ±ÿß€å Ÿæ€å⁄Ø€åÿ±€å ÿ®€åÿ¥ÿ™ÿ± ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜ€åÿØ.',
                                'ŸÖÿ¥⁄©ŸÑ ÿ¥ŸÖÿß ÿ´ÿ®ÿ™ ÿ¥ÿØ Ÿà ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿ±ÿ±ÿ≥€å ÿßÿ≥ÿ™.'
                            ];
                            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                            addMessage(randomResponse, true);
                        }, 1000);
                    }
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ÿ∞ÿÆ€åÿ±Ÿá Ÿæÿ±ŸàŸÅÿß€åŸÑ
            const saveProfile = document.getElementById('saveProfile');
            if (saveProfile) {
                saveProfile.addEventListener('click', () => {
                    const name = document.getElementById('editName')?.value;
                    const email = document.getElementById('editEmail')?.value;
                    const phone = document.getElementById('editPhone')?.value;
                    
                    if (!name || !email || !phone) {
                        showNotification('ŸÑÿ∑ŸÅÿßŸã ÿ™ŸÖÿßŸÖ ŸÅ€åŸÑÿØŸáÿß ÿ±ÿß Ÿæÿ± ⁄©ŸÜ€åÿØ', 'error');
                        return;
                    }
                    
                    // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ⁄©ÿßÿ±ÿ®ÿ±
                    let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
                    users = users.map(user => {
                        if (user.id === currentUser.id) {
                            return {
                                ...user,
                                name,
                                email,
                                phone
                            };
                        }
                        return user;
                    });
                    
                    localStorage.setItem('snapp_users', JSON.stringify(users));
                    
                    // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ⁄©ÿßÿ±ÿ®ÿ± ÿ¨ÿßÿ±€å
                    currentUser = users.find(user => user.id === currentUser.id);
                    localStorage.setItem('snapp_current_user', JSON.stringify(currentUser));
                    
                    // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å UI
                    updateUIAfterLogin();
                    
                    showNotification('Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ');
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ÿ™ÿ®Ÿáÿß€å ŸæŸÜŸÑ ÿßÿØŸÖ€åŸÜ
            const adminTabs = document.querySelectorAll('.admin-tab');
            const adminTabContents = document.querySelectorAll('.admin-tab-content');

            adminTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    adminTabs.forEach(t => t.classList.remove('active'));
                    adminTabContents.forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    const tabContent = document.getElementById(`${tabId}-tab`);
                    if (tabContent) tabContent.classList.add('active');
                });
            });

            // ŸÖÿØ€åÿ±€åÿ™ ŸÖÿØÿßŸÑ ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±ÿßŸÜŸÜÿØŸá
            const addDriverModal = document.getElementById('addDriverModal');
            const addDriverBtn = document.getElementById('addDriverBtn');
            const closeAddDriverModal = document.getElementById('closeAddDriverModal');
            const addDriverForm = document.getElementById('addDriverForm');

            if (addDriverBtn && addDriverModal) {
                addDriverBtn.addEventListener('click', () => {
                    addDriverModal.style.display = 'flex';
                });
            }

            if (closeAddDriverModal && addDriverModal) {
                closeAddDriverModal.addEventListener('click', () => {
                    addDriverModal.style.display = 'none';
                });
            }

            if (addDriverForm) {
                addDriverForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const name = document.getElementById('driverName')?.value;
                    const email = document.getElementById('driverEmail')?.value;
                    const phone = document.getElementById('driverPhone')?.value;
                    const vehicleType = document.getElementById('vehicleType')?.value;
                    const carModel = document.getElementById('carModelInput')?.value;
                    const carColor = document.getElementById('carColorInput')?.value;
                    const plateNumber = document.getElementById('plateNumberInput')?.value;
                    
                    const driverData = {
                        id: Date.now(),
                        name,
                        email,
                        phone,
                        password: '123456',
                        role: 'driver',
                        status: 'approved',
                        vehicle_type: vehicleType,
                        car_model: carModel,
                        car_color: carColor,
                        plate_number: plateNumber,
                        driver_status: 'active',
                        created_at: new Date().toISOString()
                    };
                    
                    let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
                    users.push(driverData);
                    localStorage.setItem('snapp_users', JSON.stringify(users));
                    
                    showNotification('ÿ±ÿßŸÜŸÜÿØŸá ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ');
                    if (addDriverModal) addDriverModal.style.display = 'none';
                    addDriverForm.reset();
                    loadDrivers();
                    loadAdminStats();
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ŸÖÿØÿßŸÑ ÿßŸÅÿ≤ŸàÿØŸÜ ÿ™ÿÆŸÅ€åŸÅ
            const addDiscountModal = document.getElementById('addDiscountModal');
            const addDiscountBtn = document.getElementById('addDiscountBtn');
            const closeAddDiscountModal = document.getElementById('closeAddDiscountModal');
            const addDiscountForm = document.getElementById('addDiscountForm');

            if (addDiscountBtn && addDiscountModal) {
                addDiscountBtn.addEventListener('click', () => {
                    addDiscountModal.style.display = 'flex';
                });
            }

            if (closeAddDiscountModal && addDiscountModal) {
                closeAddDiscountModal.addEventListener('click', () => {
                    addDiscountModal.style.display = 'none';
                });
            }

            if (addDiscountForm) {
                addDiscountForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const code = document.getElementById('discountCode')?.value;
                    const percent = document.getElementById('discountPercent')?.value;
                    const expiry = document.getElementById('discountExpiry')?.value;
                    const maxUses = document.getElementById('maxUses')?.value;
                    
                    const discountData = {
                        id: Date.now(),
                        code,
                        percent: parseInt(percent),
                        expiry_date: expiry,
                        max_uses: parseInt(maxUses),
                        used_count: 0,
                        created_at: new Date().toISOString()
                    };
                    
                    let discounts = JSON.parse(localStorage.getItem('snapp_discounts') || '[]');
                    discounts.push(discountData);
                    localStorage.setItem('snapp_discounts', JSON.stringify(discounts));
                    
                    showNotification('ÿ™ÿÆŸÅ€åŸÅ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ');
                    if (addDiscountModal) addDiscountModal.style.display = 'none';
                    addDiscountForm.reset();
                    loadAdminDiscounts();
                    loadDiscounts();
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ŸÖÿØÿßŸÑ ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å
            const ratingModal = document.getElementById('ratingModal');
            const closeRatingModal = document.getElementById('closeRatingModal');
            const submitRating = document.getElementById('submitRating');

            if (closeRatingModal && ratingModal) {
                closeRatingModal.addEventListener('click', () => {
                    ratingModal.style.display = 'none';
                });
            }

            if (submitRating) {
                submitRating.addEventListener('click', () => {
                    const activeStars = ratingModal?.querySelectorAll('.rating-star.active');
                    const rating = activeStars ? activeStars.length : 0;
                    const comment = document.getElementById('ratingComment')?.value;
                    const tripId = ratingModal?.getAttribute('data-trip-id');
                    
                    if (rating === 0) {
                        showNotification('ŸÑÿ∑ŸÅÿßŸã ÿ®Ÿá ÿ±ÿßŸÜŸÜÿØŸá ÿßŸÖÿ™€åÿßÿ≤ ÿØŸá€åÿØ', 'error');
                        return;
                    }
                    
                    // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ≥ŸÅÿ±
                    if (tripId) {
                        let trips = JSON.parse(localStorage.getItem('snapp_trips') || '[]');
                        trips = trips.map(trip => {
                            if (trip.id == tripId) {
                                return {
                                    ...trip,
                                    rated: true,
                                    rating: rating,
                                    rating_comment: comment
                                };
                            }
                            return trip;
                        });
                        localStorage.setItem('snapp_trips', JSON.stringify(trips));
                    }
                    
                    showNotification('ÿßŸÖÿ™€åÿßÿ≤ ÿ¥ŸÖÿß ÿ´ÿ®ÿ™ ÿ¥ÿØ. ÿ®ÿß ÿ™ÿ¥⁄©ÿ± ÿßÿ≤ ÿ¥ŸÖÿß!');
                    if (ratingModal) ratingModal.style.display = 'none';
                    
                    // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÑ€åÿ≥ÿ™ ÿ≥ŸÅÿ±Ÿáÿß
                    loadMyTrips();
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ ŸÖÿØÿßŸÑ Ÿæÿ±ÿØÿßÿÆÿ™
            const paymentModal = document.getElementById('paymentModal');
            const closePaymentModal = document.getElementById('closePaymentModal');
            const cancelPayment = document.getElementById('cancelPayment');
            const confirmPayment = document.getElementById('confirmPayment');
            const paymentMethodsModal = paymentModal?.querySelectorAll('.payment-method');

            if (closePaymentModal && paymentModal) {
                closePaymentModal.addEventListener('click', () => {
                    paymentModal.style.display = 'none';
                });
            }

            if (cancelPayment && paymentModal) {
                cancelPayment.addEventListener('click', () => {
                    paymentModal.style.display = 'none';
                });
            }

            if (paymentMethodsModal) {
                paymentMethodsModal.forEach(method => {
                    method.addEventListener('click', () => {
                        paymentMethodsModal.forEach(m => m.classList.remove('selected'));
                        method.classList.add('selected');
                        selectedPaymentMethod = method.getAttribute('data-method');
                        
                        // ŸÜŸÖÿß€åÿ¥/ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ ÿ®ÿÆÿ¥ ⁄©€åŸÅ ŸæŸàŸÑ
                        const walletPayment = document.getElementById('walletPayment');
                        if (selectedPaymentMethod === 'wallet') {
                            if (walletPayment) walletPayment.style.display = 'block';
                            const walletBalance = document.getElementById('walletBalance');
                            if (walletBalance) walletBalance.textContent = currentUser?.wallet_balance || 0;
                        } else {
                            if (walletPayment) walletPayment.style.display = 'none';
                        }
                    });
                });
            }

            if (confirmPayment) {
                confirmPayment.addEventListener('click', () => {
                    if (selectedPaymentMethod === 'wallet') {
                        const walletBalance = currentUser?.wallet_balance || 0;
                        if (walletBalance < currentPrice) {
                            showNotification('ŸÖŸàÿ¨ŸàÿØ€å ⁄©€åŸÅ ŸæŸàŸÑ ÿ¥ŸÖÿß ⁄©ÿßŸÅ€å ŸÜ€åÿ≥ÿ™', 'error');
                            return;
                        }
                        
                        // ⁄©ÿ≥ÿ± ÿßÿ≤ ⁄©€åŸÅ ŸæŸàŸÑ
                        let users = JSON.parse(localStorage.getItem('snapp_users') || '[]');
                        users = users.map(user => {
                            if (user.id === currentUser.id) {
                                return {
                                    ...user,
                                    wallet_balance: walletBalance - currentPrice
                                };
                            }
                            return user;
                        });
                        localStorage.setItem('snapp_users', JSON.stringify(users));
                        
                        // ÿ®Ÿáÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ⁄©ÿßÿ±ÿ®ÿ± ÿ¨ÿßÿ±€å
                        currentUser = users.find(user => user.id === currentUser.id);
                        localStorage.setItem('snapp_current_user', JSON.stringify(currentUser));
                    }
                    
                    showNotification('Ÿæÿ±ÿØÿßÿÆÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ');
                    if (paymentModal) paymentModal.style.display = 'none';
                    
                    // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÖÿØÿßŸÑ ÿßŸÖÿ™€åÿßÿ≤ÿØŸá€å
                    openRatingModal();
                });
            }
        };
    </script>
</body>
</html>
